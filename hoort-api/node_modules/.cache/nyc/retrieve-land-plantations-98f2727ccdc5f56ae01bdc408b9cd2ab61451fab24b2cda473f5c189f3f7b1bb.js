function cov_2de82lipfu(){var path="/Users/So/bootcamp/collab/skylab-bootcamp-202001/staff/sofia-costa/hoort/hoort-api/logic/retrieve-land-plantations.js";var hash="5f0284aaeaae7d76d061a777fabe58b6a61e04a9";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/So/bootcamp/collab/skylab-bootcamp-202001/staff/sofia-costa/hoort/hoort-api/logic/retrieve-land-plantations.js",statementMap:{"0":{start:{line:1,column:21},end:{line:1,column:43}},"1":{start:{line:2,column:29},end:{line:2,column:50}},"2":{start:{line:3,column:26},end:{line:3,column:55}},"3":{start:{line:4,column:15},end:{line:4,column:32}},"4":{start:{line:6,column:0},end:{line:23,column:1}},"5":{start:{line:7,column:4},end:{line:7,column:37}},"6":{start:{line:8,column:4},end:{line:8,column:37}},"7":{start:{line:10,column:15},end:{line:10,column:49}},"8":{start:{line:12,column:4},end:{line:12,column:74}},"9":{start:{line:12,column:26},end:{line:12,column:74}},"10":{start:{line:14,column:4},end:{line:18,column:6}},"11":{start:{line:15,column:8},end:{line:15,column:29}},"12":{start:{line:16,column:8},end:{line:16,column:66}},"13":{start:{line:17,column:8},end:{line:17,column:70}},"14":{start:{line:20,column:4},end:{line:20,column:32}},"15":{start:{line:22,column:4},end:{line:22,column:26}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:17},end:{line:6,column:18}},loc:{start:{line:6,column:43},end:{line:23,column:1}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:14,column:28},end:{line:14,column:29}},loc:{start:{line:14,column:42},end:{line:18,column:5}},line:14}},branchMap:{"0":{loc:{start:{line:12,column:4},end:{line:12,column:74}},type:"if",locations:[{start:{line:12,column:4},end:{line:12,column:74}},{start:{line:12,column:4},end:{line:12,column:74}}],line:12}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},f:{"0":0,"1":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5f0284aaeaae7d76d061a777fabe58b6a61e04a9"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_2de82lipfu=function(){return actualCoverage;};return actualCoverage;}cov_2de82lipfu();const{validate}=(cov_2de82lipfu().s[0]++,require('hoort-utils'));const{models:{Land}}=(cov_2de82lipfu().s[1]++,require('hoort-data'));const{NotFoundError}=(cov_2de82lipfu().s[2]++,require('../../hoort-errors'));const moment=(cov_2de82lipfu().s[3]++,require('moment'));cov_2de82lipfu().s[4]++;module.exports=async(userId,landId)=>{cov_2de82lipfu().f[0]++;cov_2de82lipfu().s[5]++;validate.string(userId,'userId');cov_2de82lipfu().s[6]++;validate.string(landId,'landId');let land=(cov_2de82lipfu().s[7]++,await Land.findById(landId).lean());cov_2de82lipfu().s[8]++;if(!land.plantation){cov_2de82lipfu().b[0][0]++;cov_2de82lipfu().s[9]++;throw new Error('This land isn\'t planted yet!');}else{cov_2de82lipfu().b[0][1]++;}cov_2de82lipfu().s[10]++;land.plantation.forEach(plantation=>{cov_2de82lipfu().f[1]++;cov_2de82lipfu().s[11]++;delete plantation._id;cov_2de82lipfu().s[12]++;plantation.to=moment(plantation.to).format('YYYY-MM-DD');cov_2de82lipfu().s[13]++;plantation.from=moment(plantation.from).format('YYYY-MM-DD');});cov_2de82lipfu().s[14]++;console.log(land.plantation);cov_2de82lipfu().s[15]++;return land.plantation;};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLWxhbmQtcGxhbnRhdGlvbnMuanMiXSwibmFtZXMiOlsidmFsaWRhdGUiLCJyZXF1aXJlIiwibW9kZWxzIiwiTGFuZCIsIk5vdEZvdW5kRXJyb3IiLCJtb21lbnQiLCJtb2R1bGUiLCJleHBvcnRzIiwidXNlcklkIiwibGFuZElkIiwic3RyaW5nIiwibGFuZCIsImZpbmRCeUlkIiwibGVhbiIsInBsYW50YXRpb24iLCJFcnJvciIsImZvckVhY2giLCJfaWQiLCJ0byIsImZvcm1hdCIsImZyb20iLCJjb25zb2xlIiwibG9nIl0sIm1hcHBpbmdzIjoieXZFQUFBLEtBQU0sQ0FBRUEsUUFBRiwyQkFBZUMsT0FBTyxDQUFDLGFBQUQsQ0FBdEIsQ0FBTixDQUNBLEtBQU0sQ0FBRUMsTUFBTSxDQUFFLENBQUVDLElBQUYsQ0FBViwyQkFBdUJGLE9BQU8sQ0FBQyxZQUFELENBQTlCLENBQU4sQ0FDQSxLQUFNLENBQUVHLGFBQUYsMkJBQW9CSCxPQUFPLENBQUMsb0JBQUQsQ0FBM0IsQ0FBTixDQUNBLEtBQU1JLENBQUFBLE1BQU0sMEJBQUdKLE9BQU8sQ0FBQyxRQUFELENBQVYsQ0FBWixDLHdCQUVBSyxNQUFNLENBQUNDLE9BQVAsQ0FBaUIsTUFBT0MsTUFBUCxDQUFlQyxNQUFmLEdBQTBCLGlEQUN2Q1QsUUFBUSxDQUFDVSxNQUFULENBQWdCRixNQUFoQixDQUF3QixRQUF4QixFQUR1Qyx3QkFFdkNSLFFBQVEsQ0FBQ1UsTUFBVCxDQUFnQkQsTUFBaEIsQ0FBd0IsUUFBeEIsRUFFQSxHQUFJRSxDQUFBQSxJQUFJLDBCQUFHLEtBQU1SLENBQUFBLElBQUksQ0FBQ1MsUUFBTCxDQUFjSCxNQUFkLEVBQXNCSSxJQUF0QixFQUFULENBQVIsQ0FKdUMsd0JBTXZDLEdBQUksQ0FBQ0YsSUFBSSxDQUFDRyxVQUFWLENBQXNCLHlEQUFNLElBQUlDLENBQUFBLEtBQUosQ0FBVSwrQkFBVixDQUFOLENBQWdELENBQXRFLGlDQU51Qyx5QkFRdkNKLElBQUksQ0FBQ0csVUFBTCxDQUFnQkUsT0FBaEIsQ0FBd0JGLFVBQVUsRUFBSSxrREFDbEMsTUFBT0EsQ0FBQUEsVUFBVSxDQUFDRyxHQUFsQixDQURrQyx5QkFFbENILFVBQVUsQ0FBQ0ksRUFBWCxDQUFnQmIsTUFBTSxDQUFDUyxVQUFVLENBQUNJLEVBQVosQ0FBTixDQUFzQkMsTUFBdEIsQ0FBNkIsWUFBN0IsQ0FBaEIsQ0FGa0MseUJBR2xDTCxVQUFVLENBQUNNLElBQVgsQ0FBa0JmLE1BQU0sQ0FBQ1MsVUFBVSxDQUFDTSxJQUFaLENBQU4sQ0FBd0JELE1BQXhCLENBQStCLFlBQS9CLENBQWxCLENBQ0gsQ0FKRCxFQVJ1Qyx5QkFjdkNFLE9BQU8sQ0FBQ0MsR0FBUixDQUFZWCxJQUFJLENBQUNHLFVBQWpCLEVBZHVDLHlCQWdCdkMsTUFBT0gsQ0FBQUEsSUFBSSxDQUFDRyxVQUFaLENBQ0gsQ0FqQkQiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHZhbGlkYXRlIH0gPSByZXF1aXJlKCdob29ydC11dGlscycpXG5jb25zdCB7IG1vZGVsczogeyBMYW5kIH0gfSA9IHJlcXVpcmUoJ2hvb3J0LWRhdGEnKVxuY29uc3QgeyBOb3RGb3VuZEVycm9yIH0gPSByZXF1aXJlKCcuLi8uLi9ob29ydC1lcnJvcnMnKVxuY29uc3QgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50JylcblxubW9kdWxlLmV4cG9ydHMgPSBhc3luYyAodXNlcklkLCBsYW5kSWQpID0+IHtcbiAgICB2YWxpZGF0ZS5zdHJpbmcodXNlcklkLCAndXNlcklkJylcbiAgICB2YWxpZGF0ZS5zdHJpbmcobGFuZElkLCAnbGFuZElkJylcblxuICAgIGxldCBsYW5kID0gYXdhaXQgTGFuZC5maW5kQnlJZChsYW5kSWQpLmxlYW4oKVxuXG4gICAgaWYgKCFsYW5kLnBsYW50YXRpb24pIHRocm93IG5ldyBFcnJvcignVGhpcyBsYW5kIGlzblxcJ3QgcGxhbnRlZCB5ZXQhJylcblxuICAgIGxhbmQucGxhbnRhdGlvbi5mb3JFYWNoKHBsYW50YXRpb24gPT4ge1xuICAgICAgICBkZWxldGUgcGxhbnRhdGlvbi5faWRcbiAgICAgICAgcGxhbnRhdGlvbi50byA9IG1vbWVudChwbGFudGF0aW9uLnRvKS5mb3JtYXQoJ1lZWVktTU0tREQnKVxuICAgICAgICBwbGFudGF0aW9uLmZyb20gPSBtb21lbnQocGxhbnRhdGlvbi5mcm9tKS5mb3JtYXQoJ1lZWVktTU0tREQnKVxuICAgIH0pXG5cbiAgICBjb25zb2xlLmxvZyhsYW5kLnBsYW50YXRpb24pXG5cbiAgICByZXR1cm4gbGFuZC5wbGFudGF0aW9uXG59Il19