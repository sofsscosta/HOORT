function cov_2m4haokwrn(){var path="/Users/So/bootcamp/collab/skylab-bootcamp-202001/staff/sofia-costa/hoort/hoort-api/logic/retrieve-land.js";var hash="ff18e644ecf1a2621dff7d91176b288182274747";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/So/bootcamp/collab/skylab-bootcamp-202001/staff/sofia-costa/hoort/hoort-api/logic/retrieve-land.js",statementMap:{"0":{start:{line:1,column:21},end:{line:1,column:43}},"1":{start:{line:2,column:29},end:{line:2,column:50}},"2":{start:{line:3,column:26},end:{line:3,column:55}},"3":{start:{line:5,column:0},end:{line:29,column:1}},"4":{start:{line:6,column:4},end:{line:6,column:37}},"5":{start:{line:7,column:4},end:{line:7,column:37}},"6":{start:{line:11,column:4},end:{line:28,column:10}},"7":{start:{line:14,column:12},end:{line:14,column:24}},"8":{start:{line:16,column:12},end:{line:16,column:88}},"9":{start:{line:16,column:23},end:{line:16,column:88}},"10":{start:{line:18,column:12},end:{line:21,column:14}},"11":{start:{line:19,column:16},end:{line:19,column:47}},"12":{start:{line:20,column:16},end:{line:20,column:32}},"13":{start:{line:22,column:12},end:{line:22,column:34}},"14":{start:{line:24,column:22},end:{line:24,column:26}},"15":{start:{line:27,column:12},end:{line:27,column:133}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:5,column:17},end:{line:5,column:18}},loc:{start:{line:5,column:37},end:{line:29,column:1}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:12,column:14},end:{line:12,column:15}},loc:{start:{line:12,column:29},end:{line:23,column:9}},line:12},"2":{name:"(anonymous_2)",decl:{start:{line:18,column:36},end:{line:18,column:37}},loc:{start:{line:18,column:45},end:{line:21,column:13}},line:18},"3":{name:"(anonymous_3)",decl:{start:{line:24,column:14},end:{line:24,column:15}},loc:{start:{line:24,column:22},end:{line:24,column:26}},line:24},"4":{name:"(anonymous_4)",decl:{start:{line:25,column:14},end:{line:25,column:15}},loc:{start:{line:25,column:28},end:{line:28,column:9}},line:25}},branchMap:{"0":{loc:{start:{line:16,column:12},end:{line:16,column:88}},type:"if",locations:[{start:{line:16,column:12},end:{line:16,column:88}},{start:{line:16,column:12},end:{line:16,column:88}}],line:16}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ff18e644ecf1a2621dff7d91176b288182274747"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_2m4haokwrn=function(){return actualCoverage;};return actualCoverage;}cov_2m4haokwrn();const{validate}=(cov_2m4haokwrn().s[0]++,require('hoort-utils'));const{models:{Land}}=(cov_2m4haokwrn().s[1]++,require('hoort-data'));const{NotFoundError}=(cov_2m4haokwrn().s[2]++,require('../../hoort-errors'));cov_2m4haokwrn().s[3]++;module.exports=(userId,landId)=>{cov_2m4haokwrn().f[0]++;cov_2m4haokwrn().s[4]++;validate.string(userId,'userId');cov_2m4haokwrn().s[5]++;validate.string(landId,'landId');let land;cov_2m4haokwrn().s[6]++;return Land.findById(landId).lean().then(async _land=>{cov_2m4haokwrn().f[1]++;cov_2m4haokwrn().s[7]++;land=_land;cov_2m4haokwrn().s[8]++;if(!land){cov_2m4haokwrn().b[0][0]++;cov_2m4haokwrn().s[9]++;return new NotFoundError(`land with id ${landId} does not exist`);}else{cov_2m4haokwrn().b[0][1]++;}cov_2m4haokwrn().s[10]++;land.plantation.forEach(plant=>{cov_2m4haokwrn().f[2]++;cov_2m4haokwrn().s[11]++;plant.id=plant._id.toString();cov_2m4haokwrn().s[12]++;delete plant._id;});cov_2m4haokwrn().s[13]++;return land.plantation;}).then(land=>{cov_2m4haokwrn().f[3]++;cov_2m4haokwrn().s[14]++;return land;}).then(plantation=>{cov_2m4haokwrn().f[4]++;cov_2m4haokwrn().s[15]++;return{id:landId,name:land.name,location:land.location,soiltype:land.soiltype,scheme:land.scheme,plantation};});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLWxhbmQuanMiXSwibmFtZXMiOlsidmFsaWRhdGUiLCJyZXF1aXJlIiwibW9kZWxzIiwiTGFuZCIsIk5vdEZvdW5kRXJyb3IiLCJtb2R1bGUiLCJleHBvcnRzIiwidXNlcklkIiwibGFuZElkIiwic3RyaW5nIiwibGFuZCIsImZpbmRCeUlkIiwibGVhbiIsInRoZW4iLCJfbGFuZCIsInBsYW50YXRpb24iLCJmb3JFYWNoIiwicGxhbnQiLCJpZCIsIl9pZCIsInRvU3RyaW5nIiwibmFtZSIsImxvY2F0aW9uIiwic29pbHR5cGUiLCJzY2hlbWUiXSwibWFwcGluZ3MiOiIyckZBQUEsS0FBTSxDQUFFQSxRQUFGLDJCQUFlQyxPQUFPLENBQUMsYUFBRCxDQUF0QixDQUFOLENBQ0EsS0FBTSxDQUFFQyxNQUFNLENBQUUsQ0FBRUMsSUFBRixDQUFWLDJCQUF1QkYsT0FBTyxDQUFDLFlBQUQsQ0FBOUIsQ0FBTixDQUNBLEtBQU0sQ0FBRUcsYUFBRiwyQkFBb0JILE9BQU8sQ0FBQyxvQkFBRCxDQUEzQixDQUFOLEMsd0JBRUFJLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixDQUFDQyxNQUFELENBQVNDLE1BQVQsR0FBb0IsaURBQ2pDUixRQUFRLENBQUNTLE1BQVQsQ0FBZ0JGLE1BQWhCLENBQXdCLFFBQXhCLEVBRGlDLHdCQUVqQ1AsUUFBUSxDQUFDUyxNQUFULENBQWdCRCxNQUFoQixDQUF3QixRQUF4QixFQUVBLEdBQUlFLENBQUFBLElBQUosQ0FKaUMsd0JBTWpDLE1BQU9QLENBQUFBLElBQUksQ0FBQ1EsUUFBTCxDQUFjSCxNQUFkLEVBQXNCSSxJQUF0QixHQUNGQyxJQURFLENBQ0csS0FBTUMsQ0FBQUEsS0FBTixFQUFlLGlEQUVqQkosSUFBSSxDQUFHSSxLQUFQLENBRmlCLHdCQUlqQixHQUFJLENBQUNKLElBQUwsQ0FBVywwREFBTyxJQUFJTixDQUFBQSxhQUFKLENBQW1CLGdCQUFlSSxNQUFPLGlCQUF6QyxDQUFQLENBQWlFLENBQTVFLGlDQUppQix5QkFNakJFLElBQUksQ0FBQ0ssVUFBTCxDQUFnQkMsT0FBaEIsQ0FBd0JDLEtBQUssRUFBSSxrREFDN0JBLEtBQUssQ0FBQ0MsRUFBTixDQUFXRCxLQUFLLENBQUNFLEdBQU4sQ0FBVUMsUUFBVixFQUFYLENBRDZCLHlCQUU3QixNQUFPSCxDQUFBQSxLQUFLLENBQUNFLEdBQWIsQ0FDSCxDQUhELEVBTmlCLHlCQVVqQixNQUFPVCxDQUFBQSxJQUFJLENBQUNLLFVBQVosQ0FDSCxDQVpFLEVBYUZGLElBYkUsQ0FhR0gsSUFBSSxFQUFJQSx3REFBQUEsQ0FBQUEsSUFBSSxFQWJmLEVBY0ZHLElBZEUsQ0FjR0UsVUFBVSxFQUFJLGtEQUVoQixNQUFPLENBQUVHLEVBQUUsQ0FBRVYsTUFBTixDQUFjYSxJQUFJLENBQUVYLElBQUksQ0FBQ1csSUFBekIsQ0FBK0JDLFFBQVEsQ0FBRVosSUFBSSxDQUFDWSxRQUE5QyxDQUF3REMsUUFBUSxDQUFFYixJQUFJLENBQUNhLFFBQXZFLENBQWlGQyxNQUFNLENBQUVkLElBQUksQ0FBQ2MsTUFBOUYsQ0FBc0dULFVBQXRHLENBQVAsQ0FDSCxDQWpCRSxDQUFQLENBa0JILENBeEJEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyB2YWxpZGF0ZSB9ID0gcmVxdWlyZSgnaG9vcnQtdXRpbHMnKVxuY29uc3QgeyBtb2RlbHM6IHsgTGFuZCB9IH0gPSByZXF1aXJlKCdob29ydC1kYXRhJylcbmNvbnN0IHsgTm90Rm91bmRFcnJvciB9ID0gcmVxdWlyZSgnLi4vLi4vaG9vcnQtZXJyb3JzJylcblxubW9kdWxlLmV4cG9ydHMgPSAodXNlcklkLCBsYW5kSWQpID0+IHtcbiAgICB2YWxpZGF0ZS5zdHJpbmcodXNlcklkLCAndXNlcklkJylcbiAgICB2YWxpZGF0ZS5zdHJpbmcobGFuZElkLCAnbGFuZElkJylcblxuICAgIGxldCBsYW5kXG5cbiAgICByZXR1cm4gTGFuZC5maW5kQnlJZChsYW5kSWQpLmxlYW4oKVxuICAgICAgICAudGhlbihhc3luYyBfbGFuZCA9PiB7XG5cbiAgICAgICAgICAgIGxhbmQgPSBfbGFuZFxuXG4gICAgICAgICAgICBpZiAoIWxhbmQpIHJldHVybiBuZXcgTm90Rm91bmRFcnJvcihgbGFuZCB3aXRoIGlkICR7bGFuZElkfSBkb2VzIG5vdCBleGlzdGApXG5cbiAgICAgICAgICAgIGxhbmQucGxhbnRhdGlvbi5mb3JFYWNoKHBsYW50ID0+IHtcbiAgICAgICAgICAgICAgICBwbGFudC5pZCA9IHBsYW50Ll9pZC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgZGVsZXRlIHBsYW50Ll9pZFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHJldHVybiBsYW5kLnBsYW50YXRpb25cbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4obGFuZCA9PiBsYW5kKVxuICAgICAgICAudGhlbihwbGFudGF0aW9uID0+IHtcblxuICAgICAgICAgICAgcmV0dXJuIHsgaWQ6IGxhbmRJZCwgbmFtZTogbGFuZC5uYW1lLCBsb2NhdGlvbjogbGFuZC5sb2NhdGlvbiwgc29pbHR5cGU6IGxhbmQuc29pbHR5cGUsIHNjaGVtZTogbGFuZC5zY2hlbWUsIHBsYW50YXRpb24gfVxuICAgICAgICB9KVxufSJdfQ==