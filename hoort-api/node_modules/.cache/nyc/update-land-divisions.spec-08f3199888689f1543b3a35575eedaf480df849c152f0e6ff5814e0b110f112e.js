function cov_u5qwmxq3z(){var path="/Users/So/bootcamp/collab/skylab-bootcamp-202001/staff/sofia-costa/hoort/hoort-api/logic/update-land-divisions.spec.js";var hash="5ad7baba0dc0d96fa298b8a2bbbf7ba272fc0006";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/So/bootcamp/collab/skylab-bootcamp-202001/staff/sofia-costa/hoort/hoort-api/logic/update-land-divisions.spec.js",statementMap:{"0":{start:{line:1,column:38},end:{line:1,column:45}},"1":{start:{line:2,column:35},end:{line:2,column:56}},"2":{start:{line:3,column:19},end:{line:3,column:34}},"3":{start:{line:4,column:19},end:{line:4,column:23}},"4":{start:{line:5,column:44},end:{line:5,column:57}},"5":{start:{line:6,column:28},end:{line:6,column:51}},"6":{start:{line:7,column:21},end:{line:7,column:42}},"7":{start:{line:9,column:0},end:{line:111,column:2}},"8":{start:{line:11,column:4},end:{line:16,column:6}},"9":{start:{line:12,column:8},end:{line:12,column:101}},"10":{start:{line:13,column:8},end:{line:13,column:33}},"11":{start:{line:14,column:8},end:{line:14,column:33}},"12":{start:{line:15,column:8},end:{line:15,column:14}},"13":{start:{line:21,column:4},end:{line:53,column:6}},"14":{start:{line:22,column:8},end:{line:22,column:41}},"15":{start:{line:23,column:8},end:{line:23,column:41}},"16":{start:{line:24,column:8},end:{line:24,column:44}},"17":{start:{line:25,column:8},end:{line:25,column:41}},"18":{start:{line:27,column:8},end:{line:27,column:33}},"19":{start:{line:28,column:8},end:{line:28,column:41}},"20":{start:{line:29,column:8},end:{line:29,column:41}},"21":{start:{line:31,column:8},end:{line:31,column:22}},"22":{start:{line:33,column:8},end:{line:34,column:49}},"23":{start:{line:33,column:21},end:{line:33,column:22}},"24":{start:{line:34,column:12},end:{line:34,column:49}},"25":{start:{line:36,column:8},end:{line:36,column:37}},"26":{start:{line:38,column:8},end:{line:43,column:9}},"27":{start:{line:39,column:12},end:{line:42,column:38}},"28":{start:{line:39,column:27},end:{line:39,column:70}},"29":{start:{line:39,column:40},end:{line:39,column:41}},"30":{start:{line:39,column:55},end:{line:39,column:70}},"31":{start:{line:41,column:17},end:{line:42,column:38}},"32":{start:{line:41,column:30},end:{line:41,column:31}},"33":{start:{line:42,column:16},end:{line:42,column:38}},"34":{start:{line:45,column:8},end:{line:52,column:43}},"35":{start:{line:47,column:16},end:{line:47,column:28}},"36":{start:{line:48,column:16},end:{line:48,column:33}},"37":{start:{line:50,column:24},end:{line:50,column:76}},"38":{start:{line:51,column:24},end:{line:51,column:46}},"39":{start:{line:52,column:26},end:{line:52,column:42}},"40":{start:{line:55,column:4},end:{line:66,column:6}},"41":{start:{line:57,column:8},end:{line:57,column:46}},"42":{start:{line:59,column:8},end:{line:59,column:42}},"43":{start:{line:61,column:8},end:{line:61,column:46}},"44":{start:{line:63,column:8},end:{line:65,column:9}},"45":{start:{line:64,column:12},end:{line:64,column:42}},"46":{start:{line:68,column:4},end:{line:81,column:6}},"47":{start:{line:70,column:8},end:{line:70,column:46}},"48":{start:{line:72,column:8},end:{line:72,column:46}},"49":{start:{line:74,column:8},end:{line:74,column:42}},"50":{start:{line:76,column:8},end:{line:76,column:45}},"51":{start:{line:78,column:8},end:{line:80,column:9}},"52":{start:{line:79,column:12},end:{line:79,column:42}},"53":{start:{line:83,column:4},end:{line:92,column:6}},"54":{start:{line:84,column:8},end:{line:91,column:9}},"55":{start:{line:85,column:12},end:{line:85,column:50}},"56":{start:{line:86,column:12},end:{line:86,column:50}},"57":{start:{line:87,column:12},end:{line:87,column:50}},"58":{start:{line:90,column:12},end:{line:90,column:66}},"59":{start:{line:94,column:4},end:{line:102,column:6}},"60":{start:{line:96,column:8},end:{line:101,column:9}},"61":{start:{line:97,column:12},end:{line:97,column:50}},"62":{start:{line:100,column:12},end:{line:100,column:66}},"63":{start:{line:104,column:4},end:{line:108,column:6}},"64":{start:{line:105,column:8},end:{line:105,column:33}},"65":{start:{line:106,column:8},end:{line:106,column:33}},"66":{start:{line:107,column:8},end:{line:107,column:14}},"67":{start:{line:110,column:4},end:{line:110,column:38}},"68":{start:{line:110,column:16},end:{line:110,column:37}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:9,column:32},end:{line:9,column:33}},loc:{start:{line:9,column:38},end:{line:111,column:1}},line:9},"1":{name:"(anonymous_1)",decl:{start:{line:11,column:11},end:{line:11,column:12}},loc:{start:{line:11,column:23},end:{line:16,column:5}},line:11},"2":{name:"(anonymous_2)",decl:{start:{line:21,column:15},end:{line:21,column:16}},loc:{start:{line:21,column:21},end:{line:53,column:5}},line:21},"3":{name:"(anonymous_3)",decl:{start:{line:46,column:18},end:{line:46,column:19}},loc:{start:{line:46,column:27},end:{line:49,column:13}},line:46},"4":{name:"(anonymous_4)",decl:{start:{line:50,column:18},end:{line:50,column:19}},loc:{start:{line:50,column:24},end:{line:50,column:76}},line:50},"5":{name:"(anonymous_5)",decl:{start:{line:51,column:18},end:{line:51,column:19}},loc:{start:{line:51,column:24},end:{line:51,column:46}},line:51},"6":{name:"(anonymous_6)",decl:{start:{line:52,column:18},end:{line:52,column:19}},loc:{start:{line:52,column:26},end:{line:52,column:42}},line:52},"7":{name:"(anonymous_7)",decl:{start:{line:55,column:62},end:{line:55,column:63}},loc:{start:{line:55,column:74},end:{line:66,column:5}},line:55},"8":{name:"(anonymous_8)",decl:{start:{line:68,column:72},end:{line:68,column:73}},loc:{start:{line:68,column:84},end:{line:81,column:5}},line:68},"9":{name:"(anonymous_9)",decl:{start:{line:83,column:39},end:{line:83,column:40}},loc:{start:{line:83,column:51},end:{line:92,column:5}},line:83},"10":{name:"(anonymous_10)",decl:{start:{line:94,column:39},end:{line:94,column:40}},loc:{start:{line:94,column:51},end:{line:102,column:5}},line:94},"11":{name:"(anonymous_11)",decl:{start:{line:104,column:14},end:{line:104,column:15}},loc:{start:{line:104,column:26},end:{line:108,column:5}},line:104},"12":{name:"(anonymous_12)",decl:{start:{line:110,column:10},end:{line:110,column:11}},loc:{start:{line:110,column:16},end:{line:110,column:37}},line:110}},branchMap:{"0":{loc:{start:{line:39,column:12},end:{line:42,column:38}},type:"if",locations:[{start:{line:39,column:12},end:{line:42,column:38}},{start:{line:39,column:12},end:{line:42,column:38}}],line:39}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5ad7baba0dc0d96fa298b8a2bbbf7ba272fc0006"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_u5qwmxq3z=function(){return actualCoverage;};return actualCoverage;}cov_u5qwmxq3z();const{env:{TEST_MONGODB_URL}}=(cov_u5qwmxq3z().s[0]++,process);const{models:{User,Land}}=(cov_u5qwmxq3z().s[1]++,require('hoort-data'));const{expect}=(cov_u5qwmxq3z().s[2]++,require('chai'));const{random}=(cov_u5qwmxq3z().s[3]++,Math);const{updateLandDivisions,createLand}=(cov_u5qwmxq3z().s[4]++,require('./'));const{NotAllowedError}=(cov_u5qwmxq3z().s[5]++,require('hoort-errors'));const{mongoose}=(cov_u5qwmxq3z().s[6]++,require('hoort-data'));cov_u5qwmxq3z().s[7]++;describe('updateLandDivisions',()=>{cov_u5qwmxq3z().f[0]++;cov_u5qwmxq3z().s[8]++;before(async()=>{cov_u5qwmxq3z().f[1]++;cov_u5qwmxq3z().s[9]++;await mongoose.connect(TEST_MONGODB_URL,{useNewUrlParser:true,useUnifiedTopology:true});cov_u5qwmxq3z().s[10]++;await User.deleteMany({});cov_u5qwmxq3z().s[11]++;await Land.deleteMany({});cov_u5qwmxq3z().s[12]++;return;});let id,veggiesId,name,userId,location,soiltype,scheme,nameUser,username,email,password,user,land,landId;cov_u5qwmxq3z().s[13]++;beforeEach(()=>{cov_u5qwmxq3z().f[2]++;cov_u5qwmxq3z().s[14]++;nameUser=`nameUser-${random()}`;cov_u5qwmxq3z().s[15]++;username=`username-${random()}`;cov_u5qwmxq3z().s[16]++;email=`email-${random()}@mail.com`;cov_u5qwmxq3z().s[17]++;password=`password-${random()}`;cov_u5qwmxq3z().s[18]++;name=`name-${random()}`;cov_u5qwmxq3z().s[19]++;location=`location-${random()}`;cov_u5qwmxq3z().s[20]++;soiltype=`soiltype-${random()}`;cov_u5qwmxq3z().s[21]++;veggiesId=[];cov_u5qwmxq3z().s[22]++;for(let i=(cov_u5qwmxq3z().s[23]++,0);i<10;i++){cov_u5qwmxq3z().s[24]++;veggiesId.push(`veggies-${random()}`);}cov_u5qwmxq3z().s[25]++;scheme=[[],[],[],[],[]];cov_u5qwmxq3z().s[26]++;for(let arr of scheme){cov_u5qwmxq3z().s[27]++;if(arr===0){cov_u5qwmxq3z().b[0][0]++;cov_u5qwmxq3z().s[28]++;for(let j=(cov_u5qwmxq3z().s[29]++,0);j<3;j++){cov_u5qwmxq3z().s[30]++;arr.push(false);}}else{cov_u5qwmxq3z().b[0][1]++;cov_u5qwmxq3z().s[31]++;for(let j=(cov_u5qwmxq3z().s[32]++,0);j<3;j++){cov_u5qwmxq3z().s[33]++;arr.push(veggiesId[j]);}}}cov_u5qwmxq3z().s[34]++;return User.create({name:nameUser,username,email,password}).then(_user=>{cov_u5qwmxq3z().f[3]++;cov_u5qwmxq3z().s[35]++;user=_user;cov_u5qwmxq3z().s[36]++;userId=_user.id;}).then(()=>{cov_u5qwmxq3z().f[4]++;cov_u5qwmxq3z().s[37]++;return createLand(name,userId,location,soiltype,scheme);}).then(()=>{cov_u5qwmxq3z().f[5]++;cov_u5qwmxq3z().s[38]++;return Land.findOne({name});}).then(land=>{cov_u5qwmxq3z().f[6]++;cov_u5qwmxq3z().s[39]++;return landId=land.id;});});cov_u5qwmxq3z().s[40]++;it('should double the number of rows and columns on add',async()=>{cov_u5qwmxq3z().f[7]++;cov_u5qwmxq3z().s[41]++;await updateLandDivisions('+',landId);cov_u5qwmxq3z().s[42]++;land=await Land.findById(landId);cov_u5qwmxq3z().s[43]++;expect(land.scheme).to.have.length(10);cov_u5qwmxq3z().s[44]++;for(let line of land.scheme){cov_u5qwmxq3z().s[45]++;expect(line).to.have.length(6);}});cov_u5qwmxq3z().s[46]++;it('should cut in half the number of rows and columns on subtract',async()=>{cov_u5qwmxq3z().f[8]++;cov_u5qwmxq3z().s[47]++;await updateLandDivisions('+',landId);cov_u5qwmxq3z().s[48]++;await updateLandDivisions('-',landId);cov_u5qwmxq3z().s[49]++;land=await Land.findById(landId);cov_u5qwmxq3z().s[50]++;expect(land.scheme).to.have.length(5);cov_u5qwmxq3z().s[51]++;for(let line of land.scheme){cov_u5qwmxq3z().s[52]++;expect(line).to.have.length(3);}});cov_u5qwmxq3z().s[53]++;it('should fail on max divisions',async()=>{cov_u5qwmxq3z().f[9]++;cov_u5qwmxq3z().s[54]++;try{cov_u5qwmxq3z().s[55]++;await updateLandDivisions('+',landId);cov_u5qwmxq3z().s[56]++;await updateLandDivisions('+',landId);cov_u5qwmxq3z().s[57]++;await updateLandDivisions('+',landId);}catch(error){cov_u5qwmxq3z().s[58]++;expect(error.message).to.eql('Max limit of divisions');}});cov_u5qwmxq3z().s[59]++;it('should fail on min divisions',async()=>{cov_u5qwmxq3z().f[10]++;cov_u5qwmxq3z().s[60]++;try{cov_u5qwmxq3z().s[61]++;await updateLandDivisions('-',landId);}catch(error){cov_u5qwmxq3z().s[62]++;expect(error.message).to.eql('Min limit of divisions');}});cov_u5qwmxq3z().s[63]++;afterEach(async()=>{cov_u5qwmxq3z().f[11]++;cov_u5qwmxq3z().s[64]++;await User.deleteMany({});cov_u5qwmxq3z().s[65]++;await Land.deleteMany({});cov_u5qwmxq3z().s[66]++;return;});cov_u5qwmxq3z().s[67]++;after(()=>{cov_u5qwmxq3z().f[12]++;cov_u5qwmxq3z().s[68]++;return mongoose.disconnect();});});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVwZGF0ZS1sYW5kLWRpdmlzaW9ucy5zcGVjLmpzIl0sIm5hbWVzIjpbImVudiIsIlRFU1RfTU9OR09EQl9VUkwiLCJwcm9jZXNzIiwibW9kZWxzIiwiVXNlciIsIkxhbmQiLCJyZXF1aXJlIiwiZXhwZWN0IiwicmFuZG9tIiwiTWF0aCIsInVwZGF0ZUxhbmREaXZpc2lvbnMiLCJjcmVhdGVMYW5kIiwiTm90QWxsb3dlZEVycm9yIiwibW9uZ29vc2UiLCJkZXNjcmliZSIsImJlZm9yZSIsImNvbm5lY3QiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJkZWxldGVNYW55IiwiaWQiLCJ2ZWdnaWVzSWQiLCJuYW1lIiwidXNlcklkIiwibG9jYXRpb24iLCJzb2lsdHlwZSIsInNjaGVtZSIsIm5hbWVVc2VyIiwidXNlcm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwidXNlciIsImxhbmQiLCJsYW5kSWQiLCJiZWZvcmVFYWNoIiwiaSIsInB1c2giLCJhcnIiLCJqIiwiY3JlYXRlIiwidGhlbiIsIl91c2VyIiwiZmluZE9uZSIsIml0IiwiZmluZEJ5SWQiLCJ0byIsImhhdmUiLCJsZW5ndGgiLCJsaW5lIiwiZXJyb3IiLCJtZXNzYWdlIiwiZXFsIiwiYWZ0ZXJFYWNoIiwiYWZ0ZXIiLCJkaXNjb25uZWN0Il0sIm1hcHBpbmdzIjoiZ3RPQUFBLEtBQU0sQ0FBRUEsR0FBRyxDQUFFLENBQUVDLGdCQUFGLENBQVAsMEJBQWdDQyxPQUFoQyxDQUFOLENBQ0EsS0FBTSxDQUFFQyxNQUFNLENBQUUsQ0FBRUMsSUFBRixDQUFRQyxJQUFSLENBQVYsMEJBQTZCQyxPQUFPLENBQUMsWUFBRCxDQUFwQyxDQUFOLENBQ0EsS0FBTSxDQUFFQyxNQUFGLDBCQUFhRCxPQUFPLENBQUMsTUFBRCxDQUFwQixDQUFOLENBQ0EsS0FBTSxDQUFFRSxNQUFGLDBCQUFhQyxJQUFiLENBQU4sQ0FDQSxLQUFNLENBQUVDLG1CQUFGLENBQXVCQyxVQUF2QiwwQkFBc0NM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QUFOLENBQXNCTCxFQUF0QixDQUF5Qk0sR0FBekIsQ0FBNkIsd0JBQTdCLEVBQ0gsQ0FDSixDQVJDLENBQUYsQ0FyRmtDLHdCQStGbENDLFNBQVMsQ0FBQyxTQUFZLGlEQUNsQixLQUFNaEQsQ0FBQUEsSUFBSSxDQUFDZSxVQUFMLENBQWdCLEVBQWhCLENBQU4sQ0FEa0Isd0JBRWxCLEtBQU1kLENBQUFBLElBQUksQ0FBQ2MsVUFBTCxDQUFnQixFQUFoQixDQUFOLENBRmtCLHdCQUdsQixPQUNILENBSlEsQ0FBVCxDQS9Ga0Msd0JBcUdsQ2tDLEtBQUssQ0FBQyxJQUFNLHVEQUFBeEMsQ0FBQUEsUUFBUSxDQUFDeUMsVUFBVCxHQUFxQixDQUE1QixDQUFMLENBQ0gsQ0F0R08sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgZW52OiB7IFRFU1RfTU9OR09EQl9VUkwgfSB9ID0gcHJvY2Vzc1xuY29uc3QgeyBtb2RlbHM6IHsgVXNlciwgTGFuZCB9IH0gPSByZXF1aXJlKCdob29ydC1kYXRhJylcbmNvbnN0IHsgZXhwZWN0IH0gPSByZXF1aXJlKCdjaGFpJylcbmNvbnN0IHsgcmFuZG9tIH0gPSBNYXRoXG5jb25zdCB7IHVwZGF0ZUxhbmREaXZpc2lvbnMsIGNyZWF0ZUxhbmQgfSA9IHJlcXVpcmUoJy4vJylcbmNvbnN0IHsgTm90QWxsb3dlZEVycm9yIH0gPSByZXF1aXJlKCdob29ydC1lcnJvcnMnKVxuY29uc3QgeyBtb25nb29zZSB9ID0gcmVxdWlyZSgnaG9vcnQtZGF0YScpXG5cbmRlc2NyaWJlKCd1cGRhdGVMYW5kRGl2aXNpb25zJywgKCkgPT4ge1xuXG4gICAgYmVmb3JlKGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgbW9uZ29vc2UuY29ubmVjdChURVNUX01PTkdPREJfVVJMLCB7IHVzZU5ld1VybFBhcnNlcjogdHJ1ZSwgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlIH0pXG4gICAgICAgIGF3YWl0IFVzZXIuZGVsZXRlTWFueSh7fSlcbiAgICAgICAgYXdhaXQgTGFuZC5kZWxldGVNYW55KHt9KVxuICAgICAgICByZXR1cm5cbiAgICB9KVxuXG4gICAgbGV0IGlkLCB2ZWdnaWVzSWQsIG5hbWUsIHVzZXJJZCwgbG9jYXRpb24sIHNvaWx0eXBlLCBzY2hlbWUsIG5hbWVVc2VyLCB1c2VybmFtZSwgZW1haWwsIHBhc3N3b3JkLFxuICAgICAgICB1c2VyLCBsYW5kLCBsYW5kSWRcblxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICBuYW1lVXNlciA9IGBuYW1lVXNlci0ke3JhbmRvbSgpfWBcbiAgICAgICAgdXNlcm5hbWUgPSBgdXNlcm5hbWUtJHtyYW5kb20oKX1gXG4gICAgICAgIGVtYWlsID0gYGVtYWlsLSR7cmFuZG9tKCl9QG1haWwuY29tYFxuICAgICAgICBwYXNzd29yZCA9IGBwYXNzd29yZC0ke3JhbmRvbSgpfWBcblxuICAgICAgICBuYW1lID0gYG5hbWUtJHtyYW5kb20oKX1gXG4gICAgICAgIGxvY2F0aW9uID0gYGxvY2F0aW9uLSR7cmFuZG9tKCl9YFxuICAgICAgICBzb2lsdHlwZSA9IGBzb2lsdHlwZS0ke3JhbmRvbSgpfWBcblxuICAgICAgICB2ZWdnaWVzSWQgPSBbXVxuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKylcbiAgICAgICAgICAgIHZlZ2dpZXNJZC5wdXNoKGB2ZWdnaWVzLSR7cmFuZG9tKCl9YClcblxuICAgICAgICBzY2hlbWUgPSBbW10sIFtdLCBbXSwgW10sIFtdXVxuXG4gICAgICAgIGZvciAobGV0IGFyciBvZiBzY2hlbWUpIHtcbiAgICAgICAgICAgIGlmIChhcnIgPT09IDApIGZvciAobGV0IGogPSAwOyBqIDwgMzsgaisrKSBhcnIucHVzaChmYWxzZSlcblxuICAgICAgICAgICAgZWxzZSBmb3IgKGxldCBqID0gMDsgaiA8IDM7IGorKylcbiAgICAgICAgICAgICAgICBhcnIucHVzaCh2ZWdnaWVzSWRbal0pXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gVXNlci5jcmVhdGUoeyBuYW1lOiBuYW1lVXNlciwgdXNlcm5hbWUsIGVtYWlsLCBwYXNzd29yZCB9KVxuICAgICAgICAgICAgLnRoZW4oX3VzZXIgPT4ge1xuICAgICAgICAgICAgICAgIHVzZXIgPSBfdXNlclxuICAgICAgICAgICAgICAgIHVzZXJJZCA9IF91c2VyLmlkXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4gY3JlYXRlTGFuZChuYW1lLCB1c2VySWQsIGxvY2F0aW9uLCBzb2lsdHlwZSwgc2NoZW1lKSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IExhbmQuZmluZE9uZSh7IG5hbWUgfSkpXG4gICAgICAgICAgICAudGhlbihsYW5kID0+IGxhbmRJZCA9IGxhbmQuaWQpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgZG91YmxlIHRoZSBudW1iZXIgb2Ygcm93cyBhbmQgY29sdW1ucyBvbiBhZGQnLCBhc3luYyAoKSA9PiB7XG5cbiAgICAgICAgYXdhaXQgdXBkYXRlTGFuZERpdmlzaW9ucygnKycsIGxhbmRJZClcblxuICAgICAgICBsYW5kID0gYXdhaXQgTGFuZC5maW5kQnlJZChsYW5kSWQpXG5cbiAgICAgICAgZXhwZWN0KGxhbmQuc2NoZW1lKS50by5oYXZlLmxlbmd0aCgxMClcblxuICAgICAgICBmb3IgKGxldCBsaW5lIG9mIGxhbmQuc2NoZW1lKSB7XG4gICAgICAgICAgICBleHBlY3QobGluZSkudG8uaGF2ZS5sZW5ndGgoNilcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIGN1dCBpbiBoYWxmIHRoZSBudW1iZXIgb2Ygcm93cyBhbmQgY29sdW1ucyBvbiBzdWJ0cmFjdCcsIGFzeW5jICgpID0+IHtcblxuICAgICAgICBhd2FpdCB1cGRhdGVMYW5kRGl2aXNpb25zKCcrJywgbGFuZElkKVxuXG4gICAgICAgIGF3YWl0IHVwZGF0ZUxhbmREaXZpc2lvbnMoJy0nLCBsYW5kSWQpXG5cbiAgICAgICAgbGFuZCA9IGF3YWl0IExhbmQuZmluZEJ5SWQobGFuZElkKVxuXG4gICAgICAgIGV4cGVjdChsYW5kLnNjaGVtZSkudG8uaGF2ZS5sZW5ndGgoNSlcblxuICAgICAgICBmb3IgKGxldCBsaW5lIG9mIGxhbmQuc2NoZW1lKSB7XG4gICAgICAgICAgICBleHBlY3QobGluZSkudG8uaGF2ZS5sZW5ndGgoMylcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIGZhaWwgb24gbWF4IGRpdmlzaW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHVwZGF0ZUxhbmREaXZpc2lvbnMoJysnLCBsYW5kSWQpXG4gICAgICAgICAgICBhd2FpdCB1cGRhdGVMYW5kRGl2aXNpb25zKCcrJywgbGFuZElkKVxuICAgICAgICAgICAgYXdhaXQgdXBkYXRlTGFuZERpdmlzaW9ucygnKycsIGxhbmRJZClcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvLmVxbCgnTWF4IGxpbWl0IG9mIGRpdmlzaW9ucycpXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBmYWlsIG9uIG1pbiBkaXZpc2lvbnMnLCBhc3luYyAoKSA9PiB7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHVwZGF0ZUxhbmREaXZpc2lvbnMoJy0nLCBsYW5kSWQpXG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50by5lcWwoJ01pbiBsaW1pdCBvZiBkaXZpc2lvbnMnKVxuICAgICAgICB9XG4gICAgfSlcblxuICAgIGFmdGVyRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IFVzZXIuZGVsZXRlTWFueSh7fSlcbiAgICAgICAgYXdhaXQgTGFuZC5kZWxldGVNYW55KHt9KVxuICAgICAgICByZXR1cm5cbiAgICB9KVxuXG4gICAgYWZ0ZXIoKCkgPT4gbW9uZ29vc2UuZGlzY29ubmVjdCgpKVxufSkiXX0=