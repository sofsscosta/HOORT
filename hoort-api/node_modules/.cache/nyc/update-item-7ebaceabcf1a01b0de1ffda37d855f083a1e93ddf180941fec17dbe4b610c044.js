function cov_1lyabc8wym(){var path="/Users/So/bootcamp/collab/skylab-bootcamp-202001/staff/sofia-costa/hoort/hoort-api/logic/update-item.js";var hash="25cee96dd75e1aae6c57bcee9bc4693ff5db1d25";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/So/bootcamp/collab/skylab-bootcamp-202001/staff/sofia-costa/hoort/hoort-api/logic/update-item.js",statementMap:{"0":{start:{line:1,column:21},end:{line:1,column:43}},"1":{start:{line:2,column:35},end:{line:2,column:56}},"2":{start:{line:3,column:42},end:{line:3,column:71}},"3":{start:{line:4,column:38},end:{line:4,column:57}},"4":{start:{line:5,column:15},end:{line:5,column:34}},"5":{start:{line:7,column:0},end:{line:65,column:1}},"6":{start:{line:8,column:4},end:{line:8,column:37}},"7":{start:{line:9,column:4},end:{line:9,column:37}},"8":{start:{line:12,column:4},end:{line:12,column:31}},"9":{start:{line:16,column:4},end:{line:64,column:10}},"10":{start:{line:19,column:12},end:{line:19,column:48}},"11":{start:{line:21,column:34},end:{line:21,column:64}},"12":{start:{line:23,column:12},end:{line:23,column:52}},"13":{start:{line:24,column:12},end:{line:24,column:52}},"14":{start:{line:26,column:12},end:{line:26,column:54}},"15":{start:{line:27,column:12},end:{line:27,column:54}},"16":{start:{line:29,column:12},end:{line:29,column:59}},"17":{start:{line:31,column:12},end:{line:31,column:50}},"18":{start:{line:33,column:12},end:{line:33,column:30}},"19":{start:{line:37,column:12},end:{line:47,column:13}},"20":{start:{line:39,column:16},end:{line:40,column:36}},"21":{start:{line:44,column:34},end:{line:44,column:74}},"22":{start:{line:45,column:16},end:{line:46,column:36}},"23":{start:{line:49,column:20},end:{line:49,column:41}},"24":{start:{line:54,column:12},end:{line:54,column:82}},"25":{start:{line:54,column:49},end:{line:54,column:81}},"26":{start:{line:56,column:12},end:{line:56,column:75}},"27":{start:{line:56,column:25},end:{line:56,column:75}},"28":{start:{line:58,column:12},end:{line:63,column:13}},"29":{start:{line:60,column:16},end:{line:60,column:78}},"30":{start:{line:62,column:16},end:{line:62,column:34}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:17},end:{line:7,column:18}},loc:{start:{line:7,column:61},end:{line:65,column:1}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:17,column:14},end:{line:17,column:15}},loc:{start:{line:17,column:22},end:{line:34,column:9}},line:17},"2":{name:"(anonymous_2)",decl:{start:{line:35,column:14},end:{line:35,column:15}},loc:{start:{line:35,column:22},end:{line:48,column:9}},line:35},"3":{name:"(anonymous_3)",decl:{start:{line:40,column:26},end:{line:40,column:27}},loc:{start:{line:40,column:32},end:{line:40,column:35}},line:40},"4":{name:"(anonymous_4)",decl:{start:{line:46,column:26},end:{line:46,column:27}},loc:{start:{line:46,column:32},end:{line:46,column:35}},line:46},"5":{name:"(anonymous_5)",decl:{start:{line:49,column:14},end:{line:49,column:15}},loc:{start:{line:49,column:20},end:{line:49,column:41}},line:49},"6":{name:"(anonymous_6)",decl:{start:{line:50,column:14},end:{line:50,column:15}},loc:{start:{line:50,column:22},end:{line:64,column:9}},line:50},"7":{name:"(anonymous_7)",decl:{start:{line:54,column:39},end:{line:54,column:40}},loc:{start:{line:54,column:49},end:{line:54,column:81}},line:54}},branchMap:{"0":{loc:{start:{line:37,column:12},end:{line:47,column:13}},type:"if",locations:[{start:{line:37,column:12},end:{line:47,column:13}},{start:{line:37,column:12},end:{line:47,column:13}}],line:37},"1":{loc:{start:{line:56,column:12},end:{line:56,column:75}},type:"if",locations:[{start:{line:56,column:12},end:{line:56,column:75}},{start:{line:56,column:12},end:{line:56,column:75}}],line:56},"2":{loc:{start:{line:58,column:12},end:{line:63,column:13}},type:"if",locations:[{start:{line:58,column:12},end:{line:63,column:13}},{start:{line:58,column:12},end:{line:63,column:13}}],line:58}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"25cee96dd75e1aae6c57bcee9bc4693ff5db1d25"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_1lyabc8wym=function(){return actualCoverage;};return actualCoverage;}cov_1lyabc8wym();const{validate}=(cov_1lyabc8wym().s[0]++,require('hoort-utils'));const{models:{Land,Item}}=(cov_1lyabc8wym().s[1]++,require('hoort-data'));const{NotAllowedError,ContentError}=(cov_1lyabc8wym().s[2]++,require('../../hoort-errors'));const{SchemaTypes:{ObjectId}}=(cov_1lyabc8wym().s[3]++,require('mongoose'));const bcrypt=(cov_1lyabc8wym().s[4]++,require('bcryptjs'));cov_1lyabc8wym().s[5]++;module.exports=async(userId,landId,itemId,userTime)=>{cov_1lyabc8wym().f[0]++;cov_1lyabc8wym().s[6]++;validate.string(userId,'userId');cov_1lyabc8wym().s[7]++;validate.string(landId,'landId');//validate.string(userTime, 'userTime')
cov_1lyabc8wym().s[8]++;userTime=Number(userTime);let veggie,growthDuration,minDuration,maxDuration;cov_1lyabc8wym().s[9]++;return Item.findById(itemId).then(item=>{cov_1lyabc8wym().f[1]++;cov_1lyabc8wym().s[10]++;//changing interval of max and min num of days till harvest // by adding user growth duration
growthDuration=item.growthDuration;let _growthDuration=(cov_1lyabc8wym().s[11]++,item.growthDuration.split('-'));cov_1lyabc8wym().s[12]++;minDuration=Number(_growthDuration[0]);cov_1lyabc8wym().s[13]++;maxDuration=Number(_growthDuration[1]);cov_1lyabc8wym().s[14]++;minDuration=(minDuration+userTime)/2;cov_1lyabc8wym().s[15]++;maxDuration=(maxDuration+userTime)/2;cov_1lyabc8wym().s[16]++;estimatedTime=`${minDuration}-${maxDuration}`;cov_1lyabc8wym().s[17]++;item.growthDurationAll=estimatedTime;cov_1lyabc8wym().s[18]++;return item.save();}).then(item=>{cov_1lyabc8wym().f[2]++;cov_1lyabc8wym().s[19]++;if(!item.growthDurationUser){cov_1lyabc8wym().b[0][0]++;cov_1lyabc8wym().s[20]++;return Item.findByIdAndUpdate(itemId,{$set:{growthDurationUser:userTime}}).then(()=>{cov_1lyabc8wym().f[3]++;});}else{cov_1lyabc8wym().b[0][1]++;let averageTime=(cov_1lyabc8wym().s[21]++,(item.growthDurationUser+userTime)/2);cov_1lyabc8wym().s[22]++;return Item.findByIdAndUpdate(itemId,{$set:{growthDurationUser:averageTime}}).then(()=>{cov_1lyabc8wym().f[4]++;});}}).then(()=>{cov_1lyabc8wym().f[5]++;cov_1lyabc8wym().s[23]++;return Land.findById(landId);}).then(land=>{cov_1lyabc8wym().f[6]++;cov_1lyabc8wym().s[24]++;//tenho que ter antes o tempo medio de vegetal para calcular quanto tempo falta atÃ© que usuario possa colher o fruto
veggie=land.veggies.find(veggie=>{cov_1lyabc8wym().f[7]++;cov_1lyabc8wym().s[25]++;return veggie._id.toString()===itemId;});cov_1lyabc8wym().s[26]++;if(!veggie){cov_1lyabc8wym().b[1][0]++;cov_1lyabc8wym().s[27]++;throw new Error('this veggie is not on this land');}else{cov_1lyabc8wym().b[1][1]++;}cov_1lyabc8wym().s[28]++;if(land.veggies[land.veggies.indexOf(veggie)].state==='planted'){cov_1lyabc8wym().b[2][0]++;cov_1lyabc8wym().s[29]++;land.veggies[land.veggies.indexOf(veggie)].userTime=userTime;cov_1lyabc8wym().s[30]++;return land.save();}else{cov_1lyabc8wym().b[2][1]++;}});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVwZGF0ZS1pdGVtLmpzIl0sIm5hbWVzIjpbInZhbGlkYXRlIiwicmVxdWlyZSIsIm1vZGVscyIsIkxhbmQiLCJJdGVtIiwiTm90QWxsb3dlZEVycm9yIiwiQ29udGVudEVycm9yIiwiU2NoZW1hVHlwZXMiLCJPYmplY3RJZCIsImJjcnlwdCIsIm1vZHVsZSIsImV4cG9ydHMiLCJ1c2VySWQiLCJsYW5kSWQiLCJpdGVtSWQiLCJ1c2VyVGltZSIsInN0cmluZyIsIk51bWJlciIsInZlZ2dpZSIsImdyb3d0aER1cmF0aW9uIiwibWluRHVyYXRpb24iLCJtYXhEdXJhdGlvbiIsImZpbmRCeUlkIiwidGhlbiIsIml0ZW0iLCJfZ3Jvd3RoRHVyYXRpb24iLCJzcGxpdCIsImVzdGltYXRlZFRpbWUiLCJncm93dGhEdXJhdGlvbkFsbCIsInNhdmUiLCJncm93dGhEdXJhdGlvblVzZXIiLCJmaW5kQnlJZEFuZFVwZGF0ZSIsIiRzZXQiLCJhdmVyYWdlVGltZSIsImxhbmQiLCJ2ZWdnaWVzIiwiZmluZCIsIl9pZCIsInRvU3RyaW5nIiwiRXJyb3IiLCJpbmRleE9mIiwic3RhdGUiXSwibWFwcGluZ3MiOiIwOUlBQUEsS0FBTSxDQUFFQSxRQUFGLDJCQUFlQyxPQUFPLENBQUMsYUFBRCxDQUF0QixDQUFOLENBQ0EsS0FBTSxDQUFFQyxNQUFNLENBQUUsQ0FBRUMsSUFBRixDQUFRQyxJQUFSLENBQVYsMkJBQTZCSCxPQUFPLENBQUMsWUFBRCxDQUFwQyxDQUFOLENBQ0EsS0FBTSxDQUFFSSxlQUFGLENBQW1CQyxZQUFuQiwyQkFBb0NMLE9BQU8sQ0FBQyxvQkFBRCxDQUEzQyxDQUFOLENBQ0EsS0FBTSxDQUFFTSxXQUFXLENBQUUsQ0FBRUMsUUFBRixDQUFmLDJCQUFnQ1AsT0FBTyxDQUFDLFVBQUQsQ0FBdkMsQ0FBTixDQUNBLEtBQU1RLENBQUFBLE1BQU0sMEJBQUdSLE9BQU8sQ0FBQyxVQUFELENBQVYsQ0FBWixDLHdCQUVBUyxNQUFNLENBQUNDLE9BQVAsQ0FBaUIs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QUksQ0FBQ0MsT0FBTCxDQUFhRCxJQUFJLENBQUNDLE9BQUwsQ0FBYUssT0FBYixDQUFxQnRCLE1BQXJCLENBQWIsRUFBMkNILFFBQTNDLENBQXNEQSxRQUF0RCxDQUZnRSx5QkFJaEUsTUFBT21CLENBQUFBLElBQUksQ0FBQ0wsSUFBTCxFQUFQLENBQ0gsQ0FMRCxpQ0FNSCxDQWhERSxDQUFQLENBaURILENBMUREIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyB2YWxpZGF0ZSB9ID0gcmVxdWlyZSgnaG9vcnQtdXRpbHMnKVxuY29uc3QgeyBtb2RlbHM6IHsgTGFuZCwgSXRlbSB9IH0gPSByZXF1aXJlKCdob29ydC1kYXRhJylcbmNvbnN0IHsgTm90QWxsb3dlZEVycm9yLCBDb250ZW50RXJyb3IgfSA9IHJlcXVpcmUoJy4uLy4uL2hvb3J0LWVycm9ycycpXG5jb25zdCB7IFNjaGVtYVR5cGVzOiB7IE9iamVjdElkIH0gfSA9IHJlcXVpcmUoJ21vbmdvb3NlJylcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJylcblxubW9kdWxlLmV4cG9ydHMgPSBhc3luYyAodXNlcklkLCBsYW5kSWQsIGl0ZW1JZCwgdXNlclRpbWUpID0+IHtcbiAgICB2YWxpZGF0ZS5zdHJpbmcodXNlcklkLCAndXNlcklkJylcbiAgICB2YWxpZGF0ZS5zdHJpbmcobGFuZElkLCAnbGFuZElkJylcbiAgICAvL3ZhbGlkYXRlLnN0cmluZyh1c2VyVGltZSwgJ3VzZXJUaW1lJylcblxuICAgIHVzZXJUaW1lID0gTnVtYmVyKHVzZXJUaW1lKVxuXG4gICAgbGV0IHZlZ2dpZSwgZ3Jvd3RoRHVyYXRpb24sIG1pbkR1cmF0aW9uLCBtYXhEdXJhdGlvblxuXG4gICAgcmV0dXJuIEl0ZW0uZmluZEJ5SWQoaXRlbUlkKVxuICAgICAgICAudGhlbihpdGVtID0+IHsgLy9jaGFuZ2luZyBpbnRlcnZhbCBvZiBtYXggYW5kIG1pbiBudW0gb2YgZGF5cyB0aWxsIGhhcnZlc3QgLy8gYnkgYWRkaW5nIHVzZXIgZ3Jvd3RoIGR1cmF0aW9uXG5cbiAgICAgICAgICAgIGdyb3d0aER1cmF0aW9uID0gaXRlbS5ncm93dGhEdXJhdGlvblxuXG4gICAgICAgICAgICBsZXQgX2dyb3d0aER1cmF0aW9uID0gaXRlbS5ncm93dGhEdXJhdGlvbi5zcGxpdCgnLScpXG5cbiAgICAgICAgICAgIG1pbkR1cmF0aW9uID0gTnVtYmVyKF9ncm93dGhEdXJhdGlvblswXSlcbiAgICAgICAgICAgIG1heER1cmF0aW9uID0gTnVtYmVyKF9ncm93dGhEdXJhdGlvblsxXSlcblxuICAgICAgICAgICAgbWluRHVyYXRpb24gPSAobWluRHVyYXRpb24gKyB1c2VyVGltZSkgLyAyXG4gICAgICAgICAgICBtYXhEdXJhdGlvbiA9IChtYXhEdXJhdGlvbiArIHVzZXJUaW1lKSAvIDJcblxuICAgICAgICAgICAgZXN0aW1hdGVkVGltZSA9IGAke21pbkR1cmF0aW9ufS0ke21heER1cmF0aW9ufWBcblxuICAgICAgICAgICAgaXRlbS5ncm93dGhEdXJhdGlvbkFsbCA9IGVzdGltYXRlZFRpbWVcblxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uc2F2ZSgpXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKGl0ZW0gPT4ge1xuXG4gICAgICAgICAgICBpZiAoIWl0ZW0uZ3Jvd3RoRHVyYXRpb25Vc2VyKSB7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gSXRlbS5maW5kQnlJZEFuZFVwZGF0ZShpdGVtSWQsIHsgJHNldDogeyBncm93dGhEdXJhdGlvblVzZXI6IHVzZXJUaW1lIH0gfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4geyB9KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgYXZlcmFnZVRpbWUgPSAoaXRlbS5ncm93dGhEdXJhdGlvblVzZXIgKyB1c2VyVGltZSkgLyAyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEl0ZW0uZmluZEJ5SWRBbmRVcGRhdGUoaXRlbUlkLCB7ICRzZXQ6IHsgZ3Jvd3RoRHVyYXRpb25Vc2VyOiBhdmVyYWdlVGltZSB9IH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKCkgPT4gTGFuZC5maW5kQnlJZChsYW5kSWQpKVxuICAgICAgICAudGhlbihsYW5kID0+IHtcblxuICAgICAgICAgICAgLy90ZW5obyBxdWUgdGVyIGFudGVzIG8gdGVtcG8gbWVkaW8gZGUgdmVnZXRhbCBwYXJhIGNhbGN1bGFyIHF1YW50byB0ZW1wbyBmYWx0YSBhdMOpIHF1ZSB1c3VhcmlvIHBvc3NhIGNvbGhlciBvIGZydXRvXG5cbiAgICAgICAgICAgIHZlZ2dpZSA9IGxhbmQudmVnZ2llcy5maW5kKHZlZ2dpZSA9PiB2ZWdnaWUuX2lkLnRvU3RyaW5nKCkgPT09IGl0ZW1JZClcblxuICAgICAgICAgICAgaWYgKCF2ZWdnaWUpIHRocm93IG5ldyBFcnJvcigndGhpcyB2ZWdnaWUgaXMgbm90IG9uIHRoaXMgbGFuZCcpXG5cbiAgICAgICAgICAgIGlmIChsYW5kLnZlZ2dpZXNbbGFuZC52ZWdnaWVzLmluZGV4T2YodmVnZ2llKV0uc3RhdGUgPT09ICdwbGFudGVkJykge1xuXG4gICAgICAgICAgICAgICAgbGFuZC52ZWdnaWVzW2xhbmQudmVnZ2llcy5pbmRleE9mKHZlZ2dpZSldLnVzZXJUaW1lID0gdXNlclRpbWVcblxuICAgICAgICAgICAgICAgIHJldHVybiBsYW5kLnNhdmUoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxufSJdfQ==