function cov_svfxhpe6f(){var path="/Users/So/bootcamp/collab/skylab-bootcamp-202001/staff/sofia-costa/hoort/hoort-api/logic/retrieve-user-lands.js";var hash="ef24ab3f10ad3598bcd19e9e869811fb749f80dd";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/So/bootcamp/collab/skylab-bootcamp-202001/staff/sofia-costa/hoort/hoort-api/logic/retrieve-user-lands.js",statementMap:{"0":{start:{line:1,column:21},end:{line:1,column:43}},"1":{start:{line:2,column:35},end:{line:2,column:56}},"2":{start:{line:3,column:26},end:{line:3,column:55}},"3":{start:{line:6,column:0},end:{line:22,column:1}},"4":{start:{line:7,column:4},end:{line:7,column:37}},"5":{start:{line:9,column:18},end:{line:9,column:20}},"6":{start:{line:10,column:15},end:{line:10,column:42}},"7":{start:{line:12,column:16},end:{line:12,column:26}},"8":{start:{line:14,column:4},end:{line:14,column:71}},"9":{start:{line:14,column:16},end:{line:14,column:71}},"10":{start:{line:16,column:4},end:{line:19,column:5}},"11":{start:{line:17,column:8},end:{line:17,column:55}},"12":{start:{line:18,column:8},end:{line:18,column:137}},"13":{start:{line:21,column:4},end:{line:21,column:18}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:17},end:{line:6,column:18}},loc:{start:{line:6,column:35},end:{line:22,column:1}},line:6}},branchMap:{"0":{loc:{start:{line:14,column:4},end:{line:14,column:71}},type:"if",locations:[{start:{line:14,column:4},end:{line:14,column:71}},{start:{line:14,column:4},end:{line:14,column:71}}],line:14}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ef24ab3f10ad3598bcd19e9e869811fb749f80dd"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_svfxhpe6f=function(){return actualCoverage;};return actualCoverage;}cov_svfxhpe6f();const{validate}=(cov_svfxhpe6f().s[0]++,require('hoort-utils'));const{models:{Land,User}}=(cov_svfxhpe6f().s[1]++,require('hoort-data'));const{NotFoundError}=(cov_svfxhpe6f().s[2]++,require('../../hoort-errors'));cov_svfxhpe6f().s[3]++;module.exports=async userId=>{cov_svfxhpe6f().f[0]++;cov_svfxhpe6f().s[4]++;validate.string(userId,'userId');let results=(cov_svfxhpe6f().s[5]++,[]);let user=(cov_svfxhpe6f().s[6]++,await User.findById(userId));let lands=(cov_svfxhpe6f().s[7]++,user.lands);cov_svfxhpe6f().s[8]++;if(!lands){cov_svfxhpe6f().b[0][0]++;cov_svfxhpe6f().s[9]++;return new NotFoundError(`user doesn't have any lands`);}else{cov_svfxhpe6f().b[0][1]++;}cov_svfxhpe6f().s[10]++;for(let land of user.lands){cov_svfxhpe6f().s[11]++;land=await Land.findById(land._id.toString());cov_svfxhpe6f().s[12]++;results.push({id:land._id.toString(),name:land.name,location:land.location,soiltype:land.soiltype,scheme:land.scheme});}cov_svfxhpe6f().s[13]++;return results;};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLXVzZXItbGFuZHMuanMiXSwibmFtZXMiOlsidmFsaWRhdGUiLCJyZXF1aXJlIiwibW9kZWxzIiwiTGFuZCIsIlVzZXIiLCJOb3RGb3VuZEVycm9yIiwibW9kdWxlIiwiZXhwb3J0cyIsInVzZXJJZCIsInN0cmluZyIsInJlc3VsdHMiLCJ1c2VyIiwiZmluZEJ5SWQiLCJsYW5kcyIsImxhbmQiLCJfaWQiLCJ0b1N0cmluZyIsInB1c2giLCJpZCIsIm5hbWUiLCJsb2NhdGlvbiIsInNvaWx0eXBlIiwic2NoZW1lIl0sIm1hcHBpbmdzIjoidTlEQUFBLEtBQU0sQ0FBRUEsUUFBRiwwQkFBZUMsT0FBTyxDQUFDLGFBQUQsQ0FBdEIsQ0FBTixDQUNBLEtBQU0sQ0FBRUMsTUFBTSxDQUFFLENBQUVDLElBQUYsQ0FBUUMsSUFBUixDQUFWLDBCQUE2QkgsT0FBTyxDQUFDLFlBQUQsQ0FBcEMsQ0FBTixDQUNBLEtBQU0sQ0FBRUksYUFBRiwwQkFBb0JKLE9BQU8sQ0FBQyxvQkFBRCxDQUEzQixDQUFOLEMsdUJBR0FLLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixLQUFPQyxDQUFBQSxNQUFQLEVBQWtCLCtDQUMvQlIsUUFBUSxDQUFDUyxNQUFULENBQWdCRCxNQUFoQixDQUF3QixRQUF4QixFQUVBLEdBQUlFLENBQUFBLE9BQU8seUJBQUcsRUFBSCxDQUFYLENBQ0EsR0FBSUMsQ0FBQUEsSUFBSSx5QkFBRyxLQUFNUCxDQUFBQSxJQUFJLENBQUNRLFFBQUwsQ0FBY0osTUFBZCxDQUFULENBQVIsQ0FFQSxHQUFJSyxDQUFBQSxLQUFLLHlCQUFHRixJQUFJLENBQUNFLEtBQVIsQ0FBVCxDQU4rQix1QkFRL0IsR0FBSSxDQUFDQSxLQUFMLENBQVksd0RBQU8sSUFBSVIsQ0FBQUEsYUFBSixDQUFtQiw2QkFBbkIsQ0FBUCxDQUF1RCxDQUFuRSxnQ0FSK0Isd0JBVS9CLElBQUssR0FBSVMsQ0FBQUEsSUFBVCxHQUFpQkgsQ0FBQUEsSUFBSSxDQUFDRSxLQUF0QixDQUE2Qix5QkFDekJDLElBQUksQ0FBRyxLQUFNWCxDQUFBQSxJQUFJLENBQUNTLFFBQUwsQ0FBY0UsSUFBSSxDQUFDQyxHQUFMLENBQVNDLFFBQVQsRUFBZCxDQUFiLENBRHlCLHdCQUV6Qk4sT0FBTyxDQUFDTyxJQUFSLENBQWEsQ0FBRUMsRUFBRSxDQUFFSixJQUFJLENBQUNDLEdBQUwsQ0FBU0MsUUFBVCxFQUFOLENBQTJCRyxJQUFJLENBQUVMLElBQUksQ0FBQ0ssSUFBdEMsQ0FBNENDLFFBQVEsQ0FBRU4sSUFBSSxDQUFDTSxRQUEzRCxDQUFxRUMsUUFBUSxDQUFFUCxJQUFJLENBQUNPLFFBQXBGLENBQThGQyxNQUFNLENBQUVSLElBQUksQ0FBQ1EsTUFBM0csQ0FBYixFQUNILENBYjhCLHdCQWUvQixNQUFPWixDQUFBQSxPQUFQLENBQ0gsQ0FoQkQiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHZhbGlkYXRlIH0gPSByZXF1aXJlKCdob29ydC11dGlscycpXG5jb25zdCB7IG1vZGVsczogeyBMYW5kLCBVc2VyIH0gfSA9IHJlcXVpcmUoJ2hvb3J0LWRhdGEnKVxuY29uc3QgeyBOb3RGb3VuZEVycm9yIH0gPSByZXF1aXJlKCcuLi8uLi9ob29ydC1lcnJvcnMnKVxuXG5cbm1vZHVsZS5leHBvcnRzID0gYXN5bmMgKHVzZXJJZCkgPT4ge1xuICAgIHZhbGlkYXRlLnN0cmluZyh1c2VySWQsICd1c2VySWQnKVxuXG4gICAgbGV0IHJlc3VsdHMgPSBbXVxuICAgIGxldCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZCh1c2VySWQpXG5cbiAgICBsZXQgbGFuZHMgPSB1c2VyLmxhbmRzXG5cbiAgICBpZiAoIWxhbmRzKSByZXR1cm4gbmV3IE5vdEZvdW5kRXJyb3IoYHVzZXIgZG9lc24ndCBoYXZlIGFueSBsYW5kc2ApXG5cbiAgICBmb3IgKGxldCBsYW5kIG9mIHVzZXIubGFuZHMpIHtcbiAgICAgICAgbGFuZCA9IGF3YWl0IExhbmQuZmluZEJ5SWQobGFuZC5faWQudG9TdHJpbmcoKSlcbiAgICAgICAgcmVzdWx0cy5wdXNoKHsgaWQ6IGxhbmQuX2lkLnRvU3RyaW5nKCksIG5hbWU6IGxhbmQubmFtZSwgbG9jYXRpb246IGxhbmQubG9jYXRpb24sIHNvaWx0eXBlOiBsYW5kLnNvaWx0eXBlLCBzY2hlbWU6IGxhbmQuc2NoZW1lIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHNcbn1cbiJdfQ==