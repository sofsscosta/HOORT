function cov_u5qwmxq3z(){var path="/Users/So/bootcamp/collab/skylab-bootcamp-202001/staff/sofia-costa/hoort/hoort-api/logic/update-land-divisions.spec.js";var hash="1733e54c49ddce153525136a866c1e1e4820134e";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/So/bootcamp/collab/skylab-bootcamp-202001/staff/sofia-costa/hoort/hoort-api/logic/update-land-divisions.spec.js",statementMap:{"0":{start:{line:1,column:38},end:{line:1,column:45}},"1":{start:{line:2,column:35},end:{line:2,column:56}},"2":{start:{line:3,column:19},end:{line:3,column:34}},"3":{start:{line:4,column:19},end:{line:4,column:23}},"4":{start:{line:5,column:44},end:{line:5,column:57}},"5":{start:{line:6,column:28},end:{line:6,column:51}},"6":{start:{line:7,column:21},end:{line:7,column:42}},"7":{start:{line:9,column:0},end:{line:167,column:2}},"8":{start:{line:11,column:4},end:{line:16,column:6}},"9":{start:{line:12,column:8},end:{line:12,column:101}},"10":{start:{line:13,column:8},end:{line:13,column:33}},"11":{start:{line:14,column:8},end:{line:14,column:33}},"12":{start:{line:15,column:8},end:{line:15,column:14}},"13":{start:{line:21,column:4},end:{line:56,column:6}},"14":{start:{line:22,column:8},end:{line:22,column:41}},"15":{start:{line:23,column:8},end:{line:23,column:41}},"16":{start:{line:24,column:8},end:{line:24,column:44}},"17":{start:{line:25,column:8},end:{line:25,column:41}},"18":{start:{line:27,column:8},end:{line:27,column:33}},"19":{start:{line:28,column:8},end:{line:28,column:41}},"20":{start:{line:29,column:8},end:{line:29,column:41}},"21":{start:{line:31,column:8},end:{line:31,column:22}},"22":{start:{line:33,column:8},end:{line:34,column:49}},"23":{start:{line:33,column:21},end:{line:33,column:22}},"24":{start:{line:34,column:12},end:{line:34,column:49}},"25":{start:{line:36,column:8},end:{line:36,column:37}},"26":{start:{line:38,column:8},end:{line:43,column:9}},"27":{start:{line:39,column:31},end:{line:39,column:74}},"28":{start:{line:39,column:44},end:{line:39,column:45}},"29":{start:{line:39,column:59},end:{line:39,column:74}},"30":{start:{line:45,column:8},end:{line:55,column:44}},"31":{start:{line:47,column:16},end:{line:47,column:28}},"32":{start:{line:48,column:16},end:{line:48,column:33}},"33":{start:{line:50,column:24},end:{line:50,column:76}},"34":{start:{line:51,column:24},end:{line:51,column:46}},"35":{start:{line:52,column:26},end:{line:52,column:42}},"36":{start:{line:53,column:24},end:{line:53,column:84}},"37":{start:{line:54,column:24},end:{line:54,column:60}},"38":{start:{line:55,column:26},end:{line:55,column:43}},"39":{start:{line:58,column:4},end:{line:98,column:6}},"40":{start:{line:60,column:8},end:{line:60,column:46}},"41":{start:{line:62,column:8},end:{line:62,column:42}},"42":{start:{line:64,column:8},end:{line:64,column:46}},"43":{start:{line:66,column:8},end:{line:68,column:9}},"44":{start:{line:67,column:12},end:{line:67,column:42}},"45":{start:{line:71,column:8},end:{line:71,column:46}},"46":{start:{line:73,column:8},end:{line:73,column:42}},"47":{start:{line:75,column:8},end:{line:75,column:46}},"48":{start:{line:77,column:8},end:{line:79,column:9}},"49":{start:{line:78,column:12},end:{line:78,column:43}},"50":{start:{line:83,column:24},end:{line:83,column:73}},"51":{start:{line:85,column:8},end:{line:85,column:44}},"52":{start:{line:87,column:8},end:{line:89,column:9}},"53":{start:{line:88,column:12},end:{line:88,column:42}},"54":{start:{line:91,column:8},end:{line:91,column:69}},"55":{start:{line:93,column:8},end:{line:93,column:44}},"56":{start:{line:100,column:4},end:{line:127,column:6}},"57":{start:{line:102,column:8},end:{line:102,column:27}},"58":{start:{line:104,column:8},end:{line:104,column:46}},"59":{start:{line:106,column:8},end:{line:106,column:46}},"60":{start:{line:108,column:8},end:{line:108,column:42}},"61":{start:{line:110,column:8},end:{line:110,column:45}},"62":{start:{line:112,column:8},end:{line:114,column:9}},"63":{start:{line:113,column:12},end:{line:113,column:42}},"64":{start:{line:117,column:8},end:{line:117,column:57}},"65":{start:{line:119,column:26},end:{line:119,column:75}},"66":{start:{line:121,column:8},end:{line:121,column:45}},"67":{start:{line:123,column:8},end:{line:125,column:9}},"68":{start:{line:124,column:12},end:{line:124,column:42}},"69":{start:{line:129,column:4},end:{line:138,column:6}},"70":{start:{line:130,column:8},end:{line:137,column:9}},"71":{start:{line:131,column:12},end:{line:131,column:50}},"72":{start:{line:132,column:12},end:{line:132,column:50}},"73":{start:{line:133,column:12},end:{line:133,column:50}},"74":{start:{line:136,column:12},end:{line:136,column:66}},"75":{start:{line:140,column:4},end:{line:148,column:6}},"76":{start:{line:142,column:8},end:{line:147,column:9}},"77":{start:{line:143,column:12},end:{line:143,column:50}},"78":{start:{line:146,column:12},end:{line:146,column:66}},"79":{start:{line:150,column:4},end:{line:158,column:6}},"80":{start:{line:152,column:8},end:{line:157,column:9}},"81":{start:{line:153,column:12},end:{line:153,column:53}},"82":{start:{line:156,column:12},end:{line:156,column:80}},"83":{start:{line:160,column:4},end:{line:164,column:6}},"84":{start:{line:161,column:8},end:{line:161,column:33}},"85":{start:{line:162,column:8},end:{line:162,column:33}},"86":{start:{line:163,column:8},end:{line:163,column:14}},"87":{start:{line:166,column:4},end:{line:166,column:38}},"88":{start:{line:166,column:16},end:{line:166,column:37}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:9,column:32},end:{line:9,column:33}},loc:{start:{line:9,column:38},end:{line:167,column:1}},line:9},"1":{name:"(anonymous_1)",decl:{start:{line:11,column:11},end:{line:11,column:12}},loc:{start:{line:11,column:23},end:{line:16,column:5}},line:11},"2":{name:"(anonymous_2)",decl:{start:{line:21,column:15},end:{line:21,column:16}},loc:{start:{line:21,column:21},end:{line:56,column:5}},line:21},"3":{name:"(anonymous_3)",decl:{start:{line:46,column:18},end:{line:46,column:19}},loc:{start:{line:46,column:27},end:{line:49,column:13}},line:46},"4":{name:"(anonymous_4)",decl:{start:{line:50,column:18},end:{line:50,column:19}},loc:{start:{line:50,column:24},end:{line:50,column:76}},line:50},"5":{name:"(anonymous_5)",decl:{start:{line:51,column:18},end:{line:51,column:19}},loc:{start:{line:51,column:24},end:{line:51,column:46}},line:51},"6":{name:"(anonymous_6)",decl:{start:{line:52,column:18},end:{line:52,column:19}},loc:{start:{line:52,column:26},end:{line:52,column:42}},line:52},"7":{name:"(anonymous_7)",decl:{start:{line:53,column:18},end:{line:53,column:19}},loc:{start:{line:53,column:24},end:{line:53,column:84}},line:53},"8":{name:"(anonymous_8)",decl:{start:{line:54,column:18},end:{line:54,column:19}},loc:{start:{line:54,column:24},end:{line:54,column:60}},line:54},"9":{name:"(anonymous_9)",decl:{start:{line:55,column:18},end:{line:55,column:19}},loc:{start:{line:55,column:26},end:{line:55,column:43}},line:55},"10":{name:"(anonymous_10)",decl:{start:{line:58,column:62},end:{line:58,column:63}},loc:{start:{line:58,column:74},end:{line:98,column:5}},line:58},"11":{name:"(anonymous_11)",decl:{start:{line:100,column:72},end:{line:100,column:73}},loc:{start:{line:100,column:84},end:{line:127,column:5}},line:100},"12":{name:"(anonymous_12)",decl:{start:{line:129,column:39},end:{line:129,column:40}},loc:{start:{line:129,column:51},end:{line:138,column:5}},line:129},"13":{name:"(anonymous_13)",decl:{start:{line:140,column:39},end:{line:140,column:40}},loc:{start:{line:140,column:51},end:{line:148,column:5}},line:140},"14":{name:"(anonymous_14)",decl:{start:{line:150,column:42},end:{line:150,column:43}},loc:{start:{line:150,column:54},end:{line:158,column:5}},line:150},"15":{name:"(anonymous_15)",decl:{start:{line:160,column:14},end:{line:160,column:15}},loc:{start:{line:160,column:26},end:{line:164,column:5}},line:160},"16":{name:"(anonymous_16)",decl:{start:{line:166,column:10},end:{line:166,column:11}},loc:{start:{line:166,column:16},end:{line:166,column:37}},line:166}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1733e54c49ddce153525136a866c1e1e4820134e"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_u5qwmxq3z=function(){return actualCoverage;};return actualCoverage;}cov_u5qwmxq3z();const{env:{TEST_MONGODB_URL}}=(cov_u5qwmxq3z().s[0]++,process);const{models:{User,Land}}=(cov_u5qwmxq3z().s[1]++,require('hoort-data'));const{expect}=(cov_u5qwmxq3z().s[2]++,require('chai'));const{random}=(cov_u5qwmxq3z().s[3]++,Math);const{updateLandDivisions,createLand}=(cov_u5qwmxq3z().s[4]++,require('./'));const{NotAllowedError}=(cov_u5qwmxq3z().s[5]++,require('hoort-errors'));const{mongoose}=(cov_u5qwmxq3z().s[6]++,require('hoort-data'));cov_u5qwmxq3z().s[7]++;describe('updateLandDivisions',()=>{cov_u5qwmxq3z().f[0]++;cov_u5qwmxq3z().s[8]++;before(async()=>{cov_u5qwmxq3z().f[1]++;cov_u5qwmxq3z().s[9]++;await mongoose.connect(TEST_MONGODB_URL,{useNewUrlParser:true,useUnifiedTopology:true});cov_u5qwmxq3z().s[10]++;await User.deleteMany({});cov_u5qwmxq3z().s[11]++;await Land.deleteMany({});cov_u5qwmxq3z().s[12]++;return;});let id,veggiesId,name,userId,location,soiltype,scheme,nameUser,username,email,password,user,land,landId,landId2;cov_u5qwmxq3z().s[13]++;beforeEach(()=>{cov_u5qwmxq3z().f[2]++;cov_u5qwmxq3z().s[14]++;nameUser=`nameUser-${random()}`;cov_u5qwmxq3z().s[15]++;username=`username-${random()}`;cov_u5qwmxq3z().s[16]++;email=`email-${random()}@mail.com`;cov_u5qwmxq3z().s[17]++;password=`password-${random()}`;cov_u5qwmxq3z().s[18]++;name=`name-${random()}`;cov_u5qwmxq3z().s[19]++;location=`location-${random()}`;cov_u5qwmxq3z().s[20]++;soiltype=`soiltype-${random()}`;cov_u5qwmxq3z().s[21]++;veggiesId=[];cov_u5qwmxq3z().s[22]++;for(let i=(cov_u5qwmxq3z().s[23]++,0);i<10;i++){cov_u5qwmxq3z().s[24]++;veggiesId.push(`veggies-${random()}`);}cov_u5qwmxq3z().s[25]++;scheme=[[],[],[],[],[]];cov_u5qwmxq3z().s[26]++;for(let arr of scheme){cov_u5qwmxq3z().s[27]++;/*if (arr === 0) */for(let j=(cov_u5qwmxq3z().s[28]++,0);j<3;j++){cov_u5qwmxq3z().s[29]++;arr.push(false);}// else for (let j = 0; j < 3; j++)
//     arr.push(veggiesId[j])
}cov_u5qwmxq3z().s[30]++;return User.create({name:nameUser,username,email,password}).then(_user=>{cov_u5qwmxq3z().f[3]++;cov_u5qwmxq3z().s[31]++;user=_user;cov_u5qwmxq3z().s[32]++;userId=_user.id;}).then(()=>{cov_u5qwmxq3z().f[4]++;cov_u5qwmxq3z().s[33]++;return createLand(name,userId,location,soiltype,scheme);}).then(()=>{cov_u5qwmxq3z().f[5]++;cov_u5qwmxq3z().s[34]++;return Land.findOne({name});}).then(land=>{cov_u5qwmxq3z().f[6]++;cov_u5qwmxq3z().s[35]++;return landId=land.id;}).then(()=>{cov_u5qwmxq3z().f[7]++;cov_u5qwmxq3z().s[36]++;return createLand(`${name}--2`,userId,location,soiltype,scheme);}).then(()=>{cov_u5qwmxq3z().f[8]++;cov_u5qwmxq3z().s[37]++;return Land.findOne({name:`${name}--2`});}).then(land=>{cov_u5qwmxq3z().f[9]++;cov_u5qwmxq3z().s[38]++;return landId2=land.id;});});cov_u5qwmxq3z().s[39]++;it('should double the number of rows and columns on add',async()=>{cov_u5qwmxq3z().f[10]++;cov_u5qwmxq3z().s[40]++;await updateLandDivisions('+',landId);cov_u5qwmxq3z().s[41]++;land=await Land.findById(landId);cov_u5qwmxq3z().s[42]++;expect(land.scheme).to.have.length(10);cov_u5qwmxq3z().s[43]++;for(let line of land.scheme){cov_u5qwmxq3z().s[44]++;expect(line).to.have.length(6);}cov_u5qwmxq3z().s[45]++;await updateLandDivisions('+',landId);cov_u5qwmxq3z().s[46]++;land=await Land.findById(landId);cov_u5qwmxq3z().s[47]++;expect(land.scheme).to.have.length(20);cov_u5qwmxq3z().s[48]++;for(let line of land.scheme){cov_u5qwmxq3z().s[49]++;expect(line).to.have.length(12);}let newScheme=(cov_u5qwmxq3z().s[50]++,await updateLandDivisions('+',undefined,scheme));cov_u5qwmxq3z().s[51]++;expect(newScheme).to.have.length(10);cov_u5qwmxq3z().s[52]++;for(let line of newScheme){cov_u5qwmxq3z().s[53]++;expect(line).to.have.length(6);}cov_u5qwmxq3z().s[54]++;newScheme=await updateLandDivisions('+',undefined,scheme);cov_u5qwmxq3z().s[55]++;expect(newScheme).to.have.length(20);// for (let line of newScheme) {
//     expect(line).to.have.length(12)
// }
});cov_u5qwmxq3z().s[56]++;it('should cut in half the number of rows and columns on subtract',async()=>{cov_u5qwmxq3z().f[11]++;cov_u5qwmxq3z().s[57]++;console.log(scheme);cov_u5qwmxq3z().s[58]++;await updateLandDivisions('+',landId);cov_u5qwmxq3z().s[59]++;await updateLandDivisions('-',landId);cov_u5qwmxq3z().s[60]++;land=await Land.findById(landId);cov_u5qwmxq3z().s[61]++;expect(land.scheme).to.have.length(5);cov_u5qwmxq3z().s[62]++;for(let line of land.scheme){cov_u5qwmxq3z().s[63]++;expect(line).to.have.length(3);}cov_u5qwmxq3z().s[64]++;await updateLandDivisions('+',undefined,scheme);let smallScheme=(cov_u5qwmxq3z().s[65]++,await updateLandDivisions('-',undefined,scheme));cov_u5qwmxq3z().s[66]++;expect(smallScheme).to.have.length(5);cov_u5qwmxq3z().s[67]++;for(let line of smallScheme){cov_u5qwmxq3z().s[68]++;expect(line).to.have.length(3);}});cov_u5qwmxq3z().s[69]++;it('should fail on max divisions',async()=>{cov_u5qwmxq3z().f[12]++;cov_u5qwmxq3z().s[70]++;try{cov_u5qwmxq3z().s[71]++;await updateLandDivisions('+',landId);cov_u5qwmxq3z().s[72]++;await updateLandDivisions('+',landId);cov_u5qwmxq3z().s[73]++;await updateLandDivisions('+',landId);}catch(error){cov_u5qwmxq3z().s[74]++;expect(error.message).to.eql('Max limit of divisions');}});cov_u5qwmxq3z().s[75]++;it('should fail on min divisions',async()=>{cov_u5qwmxq3z().f[13]++;cov_u5qwmxq3z().s[76]++;try{cov_u5qwmxq3z().s[77]++;await updateLandDivisions('-',landId);}catch(error){cov_u5qwmxq3z().s[78]++;expect(error.message).to.eql('Min limit of divisions');}});cov_u5qwmxq3z().s[79]++;it('should fail on no scheme passed',async()=>{cov_u5qwmxq3z().f[14]++;cov_u5qwmxq3z().s[80]++;try{cov_u5qwmxq3z().s[81]++;await updateLandDivisions('-',undefined);}catch(error){cov_u5qwmxq3z().s[82]++;expect(error.message).to.eql('land id or scheme must be introduced');}});cov_u5qwmxq3z().s[83]++;afterEach(async()=>{cov_u5qwmxq3z().f[15]++;cov_u5qwmxq3z().s[84]++;await User.deleteMany({});cov_u5qwmxq3z().s[85]++;await Land.deleteMany({});cov_u5qwmxq3z().s[86]++;return;});cov_u5qwmxq3z().s[87]++;after(()=>{cov_u5qwmxq3z().f[16]++;cov_u5qwmxq3z().s[88]++;return mongoose.disconnect();});});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVwZGF0ZS1sYW5kLWRpdmlzaW9ucy5zcGVjLmpzIl0sIm5hbWVzIjpbImVudiIsIlRFU1RfTU9OR09EQl9VUkwiLCJwcm9jZXNzIiwibW9kZWxzIiwiVXNlciIsIkxhbmQiLCJyZXF1aXJlIiwiZXhwZWN0IiwicmFuZG9tIiwiTWF0aCIsInVwZGF0ZUxhbmREaXZpc2lvbnMiLCJjcmVhdGVMYW5kIiwiTm90QWxsb3dlZEVycm9yIiwibW9uZ29vc2UiLCJkZXNjcmliZSIsImJlZm9yZSIsImNvbm5lY3QiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJkZWxldGVNYW55IiwiaWQiLCJ2ZWdnaWVzSWQiLCJuYW1lIiwidXNlcklkIiwibG9jYXRpb24iLCJzb2lsdHlwZSIsInNjaGVtZSIsIm5hbWVVc2VyIiwidXNlcm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwidXNlciIsImxhbmQiLCJsYW5kSWQiLCJsYW5kSWQyIiwiYmVmb3JlRWFjaCIsImkiLCJwdXNoIiwiYXJyIiwiaiIsImNyZWF0ZSIsInRoZW4iLCJfdXNlciIsImZpbmRPbmUiLCJpdCIsImZpbmRCeUlkIiwidG8iLCJoYXZlIiwibGVuZ3RoIiwibGluZSIsIm5ld1NjaGVtZSIsInVuZGVmaW5lZCIsImNvbnNvbGUiLCJsb2ciLCJzbWFsbFNjaGVtZSIsImVycm9yIiwibWVzc2FnZSIsImVxbCIsImFmdGVyRWFjaCIsImFmdGVyIiwiZGlzY29ubmVjdCJdLCJtYXBwaW5ncyI6Ink2UkFBQSxLQUFNLENBQUVBLEdBQUcsQ0FBRSxDQUFFQyxnQkFBRixDQUFQLDBCQUFnQ0MsT0FBaEMsQ0FBTixDQUNBLEtBQU0sQ0FBRUMsTUFBTSxDQUFFLENBQUVDLElBQUYsQ0FBUUMsSUFBUixDQUFWLDBCQUE2QkMsT0FBTyxDQUFDLFlBQUQsQ0FBcEMsQ0FBTixDQUNBLEtBQU0sQ0FBRUMsTUFBRiwwQkFBYUQsT0FBTyxDQUFDLE1BQUQsQ0FBcEIsQ0FBTixDQUNBLEtBQU0sQ0FBRUUsTUFBRiwwQkFBYUMsSUFBYixDQUFOLENBQ0EsS0FBTSxDQUFFQyxtQkFBRixDQUF1QkMsVUFBdkIsMEJBQXNDTCxPQUFPLENBQUMsSUFBRCxDQUE3QyxDQUFOLENBQ0EsS0FBTSxDQUFFTSxlQUFGLDBCQUFzQk4sT0FBTyxDQUFDLGNBQUQsQ0FBN0IsQ0FBTixDQUNBLEtBQU0sQ0FBRU8sUUFBRiwwQkFBZVAsT0FBTyxDQUFDLFlBQUQsQ0FBdEIsQ0FBTixDLHVCQUVBUSxRQUFRLENBQUMscUJBQUQsQ0FBd0IsSUFBTSwrQ0FFbENDLE1BQU0sQ0FBQyxTQUFZLCtDQUNmLEtBQU1GLENBQUFBLFFBQVEsQ0FBQ0csT0FBVCxDQUFpQmYsZ0JBQWpCLENBQW1DLENBQUVnQixlQUFlLENBQUUsSUFBbkIsQ0FBeUJDLGtCQUFrQixDQUFFLElBQTdDLENBQW5DLENBQU4sQ0FEZSx3QkFFZixLQUFNZCxDQUFBQSxJQUFJLENBQUNlLFVBQUwsQ0FBZ0IsRUFBaEIsQ0FBTixDQUZlLHdCQUdmLEtBQU1kLENBQUFBLElBQUksQ0FBQ2MsVUFBTCxDQUFnQixFQUFoQixDQUFOLENBSGUsd0JBSWYsT0FDSCxDQUxLLENBQU4sQ0FPQSxHQUFJQyxDQUFBQSxFQUFKLENBQVFDLFNBQVIsQ0FBbUJDLElBQW5CLENBQXlCQyxNQUF6QixDQUFpQ0MsUUFBakMsQ0FBMkNDLFFBQTNDLENBQXFEQyxNQUFyRCxDQUE2REMsUUFBN0QsQ0FBdUVDLFFBQXZFLENBQWlGQyxLQUFqRixDQUF3RkMsUUFBeEYsQ0FDSUMsSUFESixDQUNVQyxJQURWLENBQ2dCQyxNQURoQixDQUN3QkMsT0FEeEIsQ0FUa0Msd0JBWWxDQyxVQUFVLENBQUMsSUFBTSxnREFDYlIsUUFBUSxDQUFJLFlBQVduQixNQUFNLEVBQUcsRUFBaEMsQ0FEYSx3QkFFYm9CLFFBQVEsQ0FBSSxZQUFXcEIsTUFBTSxFQUFHLEVBQWhDLENBRmEsd0JBR2JxQixLQUFLLENBQUksU0FBUXJCLE1BQU0sRUFBRyxXQUExQixDQUhhLHdCQUlic0IsUUFBUSxDQUFJLFlBQVd0QixNQUFNLEVBQUcsRUFBaEMsQ0FKYSx3QkFNYmMsSUFBSSxDQUFJLFFBQU9kLE1BQU0sRUFBRyxFQUF4QixDQU5hLHdCQU9iZ0IsUUFBUSxDQUFJLFlBQVdoQixNQUFNLEVBQUcsRUFBaEMsQ0FQYSx3QkFRYmlCLFFBQVEsQ0FBSSxZQUFXakIsTUFBTSxFQUFHLEVBQWhDLENBUmEsd0JBVWJhLFNBQVMsQ0FBRyxFQUFaLENBVmEsd0JBWWIsSUFBSyxHQUFJZSxDQUFBQSxDQUFDLDBCQUFHLENBQUgsQ0FBVixDQUFnQkEsQ0FBQyxDQUFHLEVBQXBCLENBQXdCQSxDQUFDLEVBQXpCLENBQ0kseUJBQUFmLFNBQVMsQ0FBQ2dCLElBQVYsQ0FBZ0IsV0FBVTdCLE1BQU0sRUFBRyxFQUFuQyxFQUFxQyxDQWI1Qix3QkFlYmtCLE1BQU0sQ0FBRyxDQUFDLEVBQUQsQ0FBSyxFQUFMLENBQVMsRUFBVCxDQUFhLEVBQWIsQ0FBaUIsRUFBakIsQ0FBVCxDQWZhLHdCQWlCYixJQUFLLEdBQUlZLENBQUFBLEdBQVQsR0FBZ0JaLENBQUFBLE1BQWhCLENBQXdCLHlCQUNwQixtQkFBbUIsSUFBSyxHQUFJYSxDQUFBQSxDQUFDLDBCQUFHLENBQUgsQ0FBVixDQUFnQkEsQ0FBQyxDQUFHLENBQXBCLENBQXVCQSxDQUFDLEVBQXhCLENBQTRCLHlCQUFBRCxHQUFHLENBQUNELElBQUosQ0FBUyxLQUFULEVBQWUsQ0FFOUQ7QUFDQTtBQUNILENBdEJZLHdCQXdCYixNQUFPakMsQ0FBQUEsSUFBSSxDQUFDb0MsTUFBTCxDQUFZLENBQUVsQixJQUFJLENBQUVLLFFBQVIsQ0FBa0JDLFFBQWxCLENBQTRCQyxLQUE1QixDQUFtQ0MsUUFBbkMsQ0FBWixFQUNGVyxJQURFLENBQ0dDLEtBQUssRUFBSSxnREFDWFgsSUFBSSxDQUFHVyxLQUFQLENBRFcsd0JBRVhuQixNQUFNLENBQUdtQixLQUFLLENBQUN0QixFQUFmLENBQ0gsQ0FKRSxFQUtGcUIsSUFMRSxDQUtHLElBQU0sc0RBQUE5QixDQUFBQSxVQUFVLENBQUNXLElBQUQsQ0FBT0MsTUFBUCxDQUFlQyxRQUFmLENBQXlCQyxRQUF6QixDQUFtQ0MsTUFBbkMsQ0FBVixDQUFvRCxDQUw3RCxFQU1GZSxJQU5FLENBTUcsSUFBTSxzREFBQXBDLENBQUFBLElBQUksQ0FBQ3NDLE9BQUwsQ0FBYSxDQUFFckIsSUFBRixDQUFiLEVBQXNCLENBTi9CLEVBT0ZtQixJQVBFLENBT0dULElBQUksRUFBSSxzREFBQUMsQ0FBQUEsTUFBTSxDQUFHRCxJQUFJLENBQUNaLEVBQWQsQ0FBZ0IsQ0FQM0IsRUFRRnFCLElBUkUsQ0FRRyxJQUFNLHNEQUFBOUIsQ0FBQUEsVUFBVSxDQUFFLEdBQUVXLElBQUssS0FBVCxDQUFlQyxNQUFmLENBQXVCQyxRQUF2QixDQUFpQ0MsUUFBakMsQ0FBMkNDLE1BQTNDLENBQVYsQ0FBNEQsQ0FSckUsRUFTRmUsSUFURSxDQVNHLElBQU0sc0RBQUFwQyxDQUFBQSxJQUFJLENBQUNzQyxPQUFMLENBQWEsQ0FBRXJCLElBQUksQ0FBRyxHQUFFQSxJQUFLLEtBQWhCLENBQWIsRUFBb0MsQ0FUN0MsRUFVRm1CLElBVkUsQ0FVR1QsSUFBSSxFQUFJLHNEQUFBRSxDQUFBQSxPQUFPLENBQUdGLElBQUksQ0FBQ1osRUFBZixDQUFpQixDQVY1QixDQUFQLENBV0gsQ0FuQ1MsQ0FBVixDQVprQyx3QkFpRGxDd0IsRUFBRSxDQUFDLHFEQUFELENBQXdELFNBQVksaURBRWxFLEtBQU1sQyxDQUFBQSxtQkFBbUIsQ0FBQyxHQUFELENBQU11QixNQUFOLENBQXpCLENBRmtFLHdCQUlsRUQsSUFBSSxDQUFHLEtBQU0zQixDQUFBQSxJQUFJLENBQUN3QyxRQUFMLENBQWNaLE1BQWQsQ0FBYixDQUprRSx3QkFNbEUxQixNQUFNLENBQUN5QixJQUFJLENBQUNOLE1BQU4sQ0FBTixDQUFvQm9CLEVBQXBCLENBQXVCQyxJQUF2QixDQUE0QkMsTUFBNUIsQ0FBbUMsRUFBbkMsRUFOa0Usd0JBUWxFLElBQUssR0FBSUMsQ0FBQUEsSUFBVCxHQUFpQmpCLENBQUFBLElBQUksQ0FBQ04sTUFBdEIsQ0FBOEIseUJBQzFCbkIsTUFBTSxDQUFDMEMsSUFBRCxDQUFOLENBQWFILEVBQWIsQ0FBZ0JDLElBQWhCLENBQXFCQyxNQUFyQixDQUE0QixDQUE1QixFQUNILENBVmlFLHdCQWFsRSxLQUFNdEMsQ0FBQUEsbUJBQW1CLENBQUMsR0FBRCxDQUFNdUIsTUFBTixDQUF6QixDQWJrRSx3QkFlbEVELElBQUksQ0FBRyxLQUFNM0IsQ0FBQUEsSUFBSSxDQUFDd0MsUUFBTCxDQUFjWixNQUFkLENBQWIsQ0Fma0Usd0JBaUJsRTFCLE1BQU0sQ0FBQ3lCLElBQUksQ0FBQ04sTUFBTixDQUFOLENBQW9Cb0IsRUFBcEIsQ0FBdUJDLElBQXZCLENBQTRCQyxNQUE1QixDQUFtQyxFQUFuQyxFQWpCa0Usd0JBbUJsRSxJQUFLLEdBQUlDLENBQUFBLElBQVQsR0FBaUJqQixDQUFBQSxJQUFJLENBQUNOLE1BQXRCLENBQThCLHlCQUMxQm5CLE1BQU0sQ0FBQzBDLElBQUQsQ0FBTixDQUFhSCxFQUFiLENBQWdCQyxJQUFoQixDQUFxQkMsTUFBckIsQ0FBNEIsRUFBNUIsRUFDSCxDQUlELEdBQUlFLENBQUFBLFNBQVMsMEJBQUcsS0FBTXhDLENBQUFBLG1CQUFtQixDQUFDLEdBQUQsQ0FBTXlDLFNBQU4sQ0FBaUJ6QixNQUFqQixDQUE1QixDQUFiLENBekJrRSx3QkEyQmxFbkIsTUFBTSxDQUFDMkMsU0FBRCxDQUFOLENBQWtCSixFQUFsQixDQUFxQkMsSUFBckIsQ0FBMEJDLE1BQTFCLENBQWlDLEVBQWpDLEVBM0JrRSx3QkE2QmxFLElBQUssR0FBSUMsQ0FBQUEsSUFBVCxHQUFpQkMsQ0FBQUEsU0FBakIsQ0FBNEIseUJBQ3hCM0MsTUFBTSxDQUFDMEMsSUFBRCxDQUFOLENBQWFILEVBQWIsQ0FBZ0JDLElBQWhCLENBQXFCQyxNQUFyQixDQUE0QixDQUE1QixFQUNILENBL0JpRSx3QkFpQ2xFRSxTQUFTLENBQUcsS0FBTXhDLENBQUFBLG1CQUFtQixDQUFDLEdBQUQsQ0FBTXlDLFNBQU4sQ0FBaUJ6QixNQUFqQixDQUFyQyxDQWpDa0Usd0JBbUNsRW5CLE1BQU0sQ0FBQzJDLFNBQUQsQ0FBTixDQUFrQkosRUFBbEIsQ0FBcUJDLElBQXJCLENBQTBCQyxNQUExQixDQUFpQyxFQUFqQyxFQUVBO0FBQ0E7QUFDQTtBQUNILENBeENDLENBQUYsQ0FqRGtDLHdCQTJGbENKLEVBQUUsQ0FBQywrREFBRCxDQUFrRSxTQUFZLGlEQUU1RVEsT0FBTyxDQUFDQyxHQUFSLENBQVkzQixNQUFaLEVBRjRFLHdCQUk1RSxLQUFNaEIsQ0FBQUEsbUJBQW1CLENBQUMsR0FBRCxDQUFNdUIsTUFBTixDQUF6QixDQUo0RSx3QkFNNUUsS0FBTXZCLENBQUFBLG1CQUFtQixDQUFDLEdBQUQsQ0FBTXVCLE1BQU4sQ0FBekIsQ0FONEUsd0JBUTVFRCxJQUFJLENBQUcsS0FBTTNCLENBQUFBLElBQUksQ0FBQ3dDLFFBQUwsQ0FBY1osTUFBZCxDQUFiLENBUjRFLHdCQVU1RTFCLE1BQU0sQ0FBQ3lCLElBQUksQ0FBQ04sTUFBTixDQUFOLENBQW9Cb0IsRUFBcEIsQ0FBdUJDLElBQXZCLENBQTRCQyxNQUE1QixDQUFtQyxDQUFuQyxFQVY0RSx3QkFZNUUsSUFBSyxHQUFJQyxDQUFBQSxJQUFULEdBQWlCakIsQ0FBQUEsSUFBSSxDQUFDTixNQUF0QixDQUE4Qix5QkFDMUJuQixNQUFNLENBQUMwQyxJQUFELENBQU4sQ0FBYUgsRUFBYixDQUFnQkMsSUFBaEIsQ0FBcUJDLE1BQXJCLENBQTRCLENBQTVCLEVBQ0gsQ0FkMkUsd0JBaUI1RSxLQUFNdEMsQ0FBQUEsbUJBQW1CLENBQUMsR0FBRCxDQUFNeUMsU0FBTixDQUFpQnpCLE1BQWpCLENBQXpCLENBRUEsR0FBSTRCLENBQUFBLFdBQVcsMEJBQUcsS0FBTTVDLENBQUFBLG1CQUFtQixDQUFDLEdBQUQsQ0FBTXlDLFNBQU4sQ0FBaUJ6QixNQUFqQixDQUE1QixDQUFmLENBbkI0RSx3QkFxQjVFbkIsTUFBTSxDQUFDK0MsV0FBRCxDQUFOLENBQW9CUixFQUFwQixDQUF1QkMsSUFBdkIsQ0FBNEJDLE1BQTVCLENBQW1DLENBQW5DLEVBckI0RSx3QkF1QjVFLElBQUssR0FBSUMsQ0FBQUEsSUFBVCxHQUFpQkssQ0FBQUEsV0FBakIsQ0FBOEIseUJBQzFCL0MsTUFBTSxDQUFDMEMsSUFBRCxDQUFOLENBQWFILEVBQWIsQ0FBZ0JDLElBQWhCLENBQXFCQyxNQUFyQixDQUE0QixDQUE1QixFQUNILENBRUosQ0EzQkMsQ0FBRixDQTNGa0Msd0JBd0hsQ0osRUFBRSxDQUFDLDhCQUFELENBQWlDLFNBQVksaURBQzNDLEdBQUkseUJBQ0EsS0FBTWxDLENBQUFBLG1CQUFtQixDQUFDLEdBQUQsQ0FBTXVCLE1BQU4sQ0FBekIsQ0FEQSx3QkFFQSxLQUFNdkIsQ0FBQUEsbUJBQW1CLENBQUMsR0FBRCxDQUFNdUIsTUFBTixDQUF6QixDQUZBLHdCQUdBLEtBQU12QixDQUFBQSxtQkFBbUIsQ0FBQyxHQUFELENBQU11QixNQUFOLENBQXpCLENBRUgsQ0FBQyxNQUFPc0IsS0FBUCxDQUFjLHlCQUNaaEQsTUFBTSxDQUFDZ0QsS0FBSyxDQUFDQyxPQUFQLENBQU4sQ0FBc0JWLEVBQXRCLENBQXlCVyxHQUF6QixDQUE2Qix3QkFBN0IsRUFDSCxDQUNKLENBVEMsQ0FBRixDQXhIa0Msd0JBbUlsQ2IsRUFBRSxDQUFDLDhCQUFELENBQWlDLFNBQVksaURBRTNDLEdBQUkseUJBQ0EsS0FBTWxDLENBQUFBLG1CQUFtQixDQUFDLEdBQUQsQ0FBTXVCLE1BQU4sQ0FBekIsQ0FFSCxDQUFDLE1BQU9zQixLQUFQLENBQWMseUJBQ1poRCxNQUFNLENBQUNnRCxLQUFLLENBQUNDLE9BQVAsQ0FBTixDQUFzQlYsRUFBdEIsQ0FBeUJXLEdBQXpCLENBQTZCLHdCQUE3QixFQUNILENBQ0osQ0FSQyxDQUFGLENBbklrQyx3QkE2SWxDYixFQUFFLENBQUMsaUNBQUQsQ0FBb0MsU0FBWSxpREFFOUMsR0FBSSx5QkFDQSxLQUFNbEMsQ0FBQUEsbUJBQW1CLENBQUMsR0FBRCxDQUFNeUMsU0FBTixDQUF6QixDQUVILENBQUMsTUFBT0ksS0FBUCxDQUFjLHlCQUNaaEQsTUFBTSxDQUFDZ0QsS0FBSyxDQUFDQyxPQUFQLENBQU4sQ0FBc0JWLEVBQXRCLENBQXlCVyxHQUF6QixDQUE2QixzQ0FBN0IsRUFDSCxDQUNKLENBUkMsQ0FBRixDQTdJa0Msd0JBdUpsQ0MsU0FBUyxDQUFDLFNBQVksaURBQ2xCLEtBQU10RCxDQUFBQSxJQUFJLENBQUNlLFVBQUwsQ0FBZ0IsRUFBaEIsQ0FBTixDQURrQix3QkFFbEIsS0FBTWQsQ0FBQUEsSUFBSSxDQUFDYyxVQUFMLENBQWdCLEVBQWhCLENBQU4sQ0FGa0Isd0JBR2xCLE9BQ0gsQ0FKUSxDQUFULENBdkprQyx3QkE2SmxDd0MsS0FBSyxDQUFDLElBQU0sdURBQUE5QyxDQUFBQSxRQUFRLENBQUMrQyxVQUFULEdBQXFCLENBQTVCLENBQUwsQ0FDSCxDQTlKTyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBlbnY6IHsgVEVTVF9NT05HT0RCX1VSTCB9IH0gPSBwcm9jZXNzXG5jb25zdCB7IG1vZGVsczogeyBVc2VyLCBMYW5kIH0gfSA9IHJlcXVpcmUoJ2hvb3J0LWRhdGEnKVxuY29uc3QgeyBleHBlY3QgfSA9IHJlcXVpcmUoJ2NoYWknKVxuY29uc3QgeyByYW5kb20gfSA9IE1hdGhcbmNvbnN0IHsgdXBkYXRlTGFuZERpdmlzaW9ucywgY3JlYXRlTGFuZCB9ID0gcmVxdWlyZSgnLi8nKVxuY29uc3QgeyBOb3RBbGxvd2VkRXJyb3IgfSA9IHJlcXVpcmUoJ2hvb3J0LWVycm9ycycpXG5jb25zdCB7IG1vbmdvb3NlIH0gPSByZXF1aXJlKCdob29ydC1kYXRhJylcblxuZGVzY3JpYmUoJ3VwZGF0ZUxhbmREaXZpc2lvbnMnLCAoKSA9PiB7XG5cbiAgICBiZWZvcmUoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0KFRFU1RfTU9OR09EQl9VUkwsIHsgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLCB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUgfSlcbiAgICAgICAgYXdhaXQgVXNlci5kZWxldGVNYW55KHt9KVxuICAgICAgICBhd2FpdCBMYW5kLmRlbGV0ZU1hbnkoe30pXG4gICAgICAgIHJldHVyblxuICAgIH0pXG5cbiAgICBsZXQgaWQsIHZlZ2dpZXNJZCwgbmFtZSwgdXNlcklkLCBsb2NhdGlvbiwgc29pbHR5cGUsIHNjaGVtZSwgbmFtZVVzZXIsIHVzZXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQsXG4gICAgICAgIHVzZXIsIGxhbmQsIGxhbmRJZCwgbGFuZElkMlxuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgIG5hbWVVc2VyID0gYG5hbWVVc2VyLSR7cmFuZG9tKCl9YFxuICAgICAgICB1c2VybmFtZSA9IGB1c2VybmFtZS0ke3JhbmRvbSgpfWBcbiAgICAgICAgZW1haWwgPSBgZW1haWwtJHtyYW5kb20oKX1AbWFpbC5jb21gXG4gICAgICAgIHBhc3N3b3JkID0gYHBhc3N3b3JkLSR7cmFuZG9tKCl9YFxuXG4gICAgICAgIG5hbWUgPSBgbmFtZS0ke3JhbmRvbSgpfWBcbiAgICAgICAgbG9jYXRpb24gPSBgbG9jYXRpb24tJHtyYW5kb20oKX1gXG4gICAgICAgIHNvaWx0eXBlID0gYHNvaWx0eXBlLSR7cmFuZG9tKCl9YFxuXG4gICAgICAgIHZlZ2dpZXNJZCA9IFtdXG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKVxuICAgICAgICAgICAgdmVnZ2llc0lkLnB1c2goYHZlZ2dpZXMtJHtyYW5kb20oKX1gKVxuXG4gICAgICAgIHNjaGVtZSA9IFtbXSwgW10sIFtdLCBbXSwgW11dXG5cbiAgICAgICAgZm9yIChsZXQgYXJyIG9mIHNjaGVtZSkge1xuICAgICAgICAgICAgLyppZiAoYXJyID09PSAwKSAqL2ZvciAobGV0IGogPSAwOyBqIDwgMzsgaisrKSBhcnIucHVzaChmYWxzZSlcblxuICAgICAgICAgICAgLy8gZWxzZSBmb3IgKGxldCBqID0gMDsgaiA8IDM7IGorKylcbiAgICAgICAgICAgIC8vICAgICBhcnIucHVzaCh2ZWdnaWVzSWRbal0pXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gVXNlci5jcmVhdGUoeyBuYW1lOiBuYW1lVXNlciwgdXNlcm5hbWUsIGVtYWlsLCBwYXNzd29yZCB9KVxuICAgICAgICAgICAgLnRoZW4oX3VzZXIgPT4ge1xuICAgICAgICAgICAgICAgIHVzZXIgPSBfdXNlclxuICAgICAgICAgICAgICAgIHVzZXJJZCA9IF91c2VyLmlkXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4gY3JlYXRlTGFuZChuYW1lLCB1c2VySWQsIGxvY2F0aW9uLCBzb2lsdHlwZSwgc2NoZW1lKSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IExhbmQuZmluZE9uZSh7IG5hbWUgfSkpXG4gICAgICAgICAgICAudGhlbihsYW5kID0+IGxhbmRJZCA9IGxhbmQuaWQpXG4gICAgICAgICAgICAudGhlbigoKSA9PiBjcmVhdGVMYW5kKGAke25hbWV9LS0yYCwgdXNlcklkLCBsb2NhdGlvbiwgc29pbHR5cGUsIHNjaGVtZSkpXG4gICAgICAgICAgICAudGhlbigoKSA9PiBMYW5kLmZpbmRPbmUoeyBuYW1lOiBgJHtuYW1lfS0tMmAgfSkpXG4gICAgICAgICAgICAudGhlbihsYW5kID0+IGxhbmRJZDIgPSBsYW5kLmlkKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIGRvdWJsZSB0aGUgbnVtYmVyIG9mIHJvd3MgYW5kIGNvbHVtbnMgb24gYWRkJywgYXN5bmMgKCkgPT4ge1xuXG4gICAgICAgIGF3YWl0IHVwZGF0ZUxhbmREaXZpc2lvbnMoJysnLCBsYW5kSWQpXG5cbiAgICAgICAgbGFuZCA9IGF3YWl0IExhbmQuZmluZEJ5SWQobGFuZElkKVxuXG4gICAgICAgIGV4cGVjdChsYW5kLnNjaGVtZSkudG8uaGF2ZS5sZW5ndGgoMTApXG5cbiAgICAgICAgZm9yIChsZXQgbGluZSBvZiBsYW5kLnNjaGVtZSkge1xuICAgICAgICAgICAgZXhwZWN0KGxpbmUpLnRvLmhhdmUubGVuZ3RoKDYpXG4gICAgICAgIH1cblxuXG4gICAgICAgIGF3YWl0IHVwZGF0ZUxhbmREaXZpc2lvbnMoJysnLCBsYW5kSWQpXG5cbiAgICAgICAgbGFuZCA9IGF3YWl0IExhbmQuZmluZEJ5SWQobGFuZElkKVxuXG4gICAgICAgIGV4cGVjdChsYW5kLnNjaGVtZSkudG8uaGF2ZS5sZW5ndGgoMjApXG5cbiAgICAgICAgZm9yIChsZXQgbGluZSBvZiBsYW5kLnNjaGVtZSkge1xuICAgICAgICAgICAgZXhwZWN0KGxpbmUpLnRvLmhhdmUubGVuZ3RoKDEyKVxuICAgICAgICB9XG5cblxuXG4gICAgICAgIGxldCBuZXdTY2hlbWUgPSBhd2FpdCB1cGRhdGVMYW5kRGl2aXNpb25zKCcrJywgdW5kZWZpbmVkLCBzY2hlbWUpXG5cbiAgICAgICAgZXhwZWN0KG5ld1NjaGVtZSkudG8uaGF2ZS5sZW5ndGgoMTApXG5cbiAgICAgICAgZm9yIChsZXQgbGluZSBvZiBuZXdTY2hlbWUpIHtcbiAgICAgICAgICAgIGV4cGVjdChsaW5lKS50by5oYXZlLmxlbmd0aCg2KVxuICAgICAgICB9XG5cbiAgICAgICAgbmV3U2NoZW1lID0gYXdhaXQgdXBkYXRlTGFuZERpdmlzaW9ucygnKycsIHVuZGVmaW5lZCwgc2NoZW1lKVxuXG4gICAgICAgIGV4cGVjdChuZXdTY2hlbWUpLnRvLmhhdmUubGVuZ3RoKDIwKVxuXG4gICAgICAgIC8vIGZvciAobGV0IGxpbmUgb2YgbmV3U2NoZW1lKSB7XG4gICAgICAgIC8vICAgICBleHBlY3QobGluZSkudG8uaGF2ZS5sZW5ndGgoMTIpXG4gICAgICAgIC8vIH1cbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBjdXQgaW4gaGFsZiB0aGUgbnVtYmVyIG9mIHJvd3MgYW5kIGNvbHVtbnMgb24gc3VidHJhY3QnLCBhc3luYyAoKSA9PiB7XG5cbiAgICAgICAgY29uc29sZS5sb2coc2NoZW1lKVxuXG4gICAgICAgIGF3YWl0IHVwZGF0ZUxhbmREaXZpc2lvbnMoJysnLCBsYW5kSWQpXG5cbiAgICAgICAgYXdhaXQgdXBkYXRlTGFuZERpdmlzaW9ucygnLScsIGxhbmRJZClcblxuICAgICAgICBsYW5kID0gYXdhaXQgTGFuZC5maW5kQnlJZChsYW5kSWQpXG5cbiAgICAgICAgZXhwZWN0KGxhbmQuc2NoZW1lKS50by5oYXZlLmxlbmd0aCg1KVxuXG4gICAgICAgIGZvciAobGV0IGxpbmUgb2YgbGFuZC5zY2hlbWUpIHtcbiAgICAgICAgICAgIGV4cGVjdChsaW5lKS50by5oYXZlLmxlbmd0aCgzKVxuICAgICAgICB9XG5cblxuICAgICAgICBhd2FpdCB1cGRhdGVMYW5kRGl2aXNpb25zKCcrJywgdW5kZWZpbmVkLCBzY2hlbWUpXG5cbiAgICAgICAgbGV0IHNtYWxsU2NoZW1lID0gYXdhaXQgdXBkYXRlTGFuZERpdmlzaW9ucygnLScsIHVuZGVmaW5lZCwgc2NoZW1lKVxuXG4gICAgICAgIGV4cGVjdChzbWFsbFNjaGVtZSkudG8uaGF2ZS5sZW5ndGgoNSlcblxuICAgICAgICBmb3IgKGxldCBsaW5lIG9mIHNtYWxsU2NoZW1lKSB7XG4gICAgICAgICAgICBleHBlY3QobGluZSkudG8uaGF2ZS5sZW5ndGgoMylcbiAgICAgICAgfVxuXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgZmFpbCBvbiBtYXggZGl2aXNpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdXBkYXRlTGFuZERpdmlzaW9ucygnKycsIGxhbmRJZClcbiAgICAgICAgICAgIGF3YWl0IHVwZGF0ZUxhbmREaXZpc2lvbnMoJysnLCBsYW5kSWQpXG4gICAgICAgICAgICBhd2FpdCB1cGRhdGVMYW5kRGl2aXNpb25zKCcrJywgbGFuZElkKVxuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG8uZXFsKCdNYXggbGltaXQgb2YgZGl2aXNpb25zJylcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIGZhaWwgb24gbWluIGRpdmlzaW9ucycsIGFzeW5jICgpID0+IHtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdXBkYXRlTGFuZERpdmlzaW9ucygnLScsIGxhbmRJZClcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvLmVxbCgnTWluIGxpbWl0IG9mIGRpdmlzaW9ucycpXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBmYWlsIG9uIG5vIHNjaGVtZSBwYXNzZWQnLCBhc3luYyAoKSA9PiB7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHVwZGF0ZUxhbmREaXZpc2lvbnMoJy0nLCB1bmRlZmluZWQpXG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50by5lcWwoJ2xhbmQgaWQgb3Igc2NoZW1lIG11c3QgYmUgaW50cm9kdWNlZCcpXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgYWZ0ZXJFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgVXNlci5kZWxldGVNYW55KHt9KVxuICAgICAgICBhd2FpdCBMYW5kLmRlbGV0ZU1hbnkoe30pXG4gICAgICAgIHJldHVyblxuICAgIH0pXG5cbiAgICBhZnRlcigoKSA9PiBtb25nb29zZS5kaXNjb25uZWN0KCkpXG59KSJdfQ==