function cov_1rrmj6v3vh(){var path="/Users/So/bootcamp/collab/skylab-bootcamp-202001/staff/sofia-costa/hoort/hoort-api/logic/retrieve-user.js";var hash="16cf5f031c94e7fcea05575fc3c277f4375079ad";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/So/bootcamp/collab/skylab-bootcamp-202001/staff/sofia-costa/hoort/hoort-api/logic/retrieve-user.js",statementMap:{"0":{start:{line:1,column:21},end:{line:1,column:43}},"1":{start:{line:2,column:29},end:{line:2,column:50}},"2":{start:{line:3,column:15},end:{line:3,column:32}},"3":{start:{line:4,column:43},end:{line:4,column:72}},"4":{start:{line:6,column:0},end:{line:18,column:1}},"5":{start:{line:7,column:4},end:{line:7,column:29}},"6":{start:{line:9,column:4},end:{line:17,column:73}},"7":{start:{line:11,column:12},end:{line:11,column:84}},"8":{start:{line:11,column:23},end:{line:11,column:84}},"9":{start:{line:12,column:12},end:{line:12,column:97}},"10":{start:{line:12,column:34},end:{line:12,column:97}},"11":{start:{line:13,column:12},end:{line:13,column:68}},"12":{start:{line:15,column:12},end:{line:15,column:30}},"13":{start:{line:17,column:46},end:{line:17,column:71}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:17},end:{line:6,column:18}},loc:{start:{line:6,column:23},end:{line:18,column:1}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:10,column:14},end:{line:10,column:15}},loc:{start:{line:10,column:22},end:{line:16,column:9}},line:10},"2":{name:"(anonymous_2)",decl:{start:{line:17,column:14},end:{line:17,column:15}},loc:{start:{line:17,column:46},end:{line:17,column:71}},line:17}},branchMap:{"0":{loc:{start:{line:11,column:12},end:{line:11,column:84}},type:"if",locations:[{start:{line:11,column:12},end:{line:11,column:84}},{start:{line:11,column:12},end:{line:11,column:84}}],line:11},"1":{loc:{start:{line:12,column:12},end:{line:12,column:97}},type:"if",locations:[{start:{line:12,column:12},end:{line:12,column:97}},{start:{line:12,column:12},end:{line:12,column:97}}],line:12}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"16cf5f031c94e7fcea05575fc3c277f4375079ad"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_1rrmj6v3vh=function(){return actualCoverage;};return actualCoverage;}cov_1rrmj6v3vh();const{validate}=(cov_1rrmj6v3vh().s[0]++,require('hoort-utils'));const{models:{User}}=(cov_1rrmj6v3vh().s[1]++,require('hoort-data'));const moment=(cov_1rrmj6v3vh().s[2]++,require('moment'));const{NotFoundError,NotAllowedError}=(cov_1rrmj6v3vh().s[3]++,require('../../hoort-errors'));cov_1rrmj6v3vh().s[4]++;module.exports=id=>{cov_1rrmj6v3vh().f[0]++;cov_1rrmj6v3vh().s[5]++;validate.string(id,'id');cov_1rrmj6v3vh().s[6]++;return User.findById(id).then(user=>{cov_1rrmj6v3vh().f[1]++;cov_1rrmj6v3vh().s[7]++;if(!user){cov_1rrmj6v3vh().b[0][0]++;cov_1rrmj6v3vh().s[8]++;return new NotFoundError(`user with id ${id} does not exist`);}else{cov_1rrmj6v3vh().b[0][1]++;}cov_1rrmj6v3vh().s[9]++;if(user.deactivated){cov_1rrmj6v3vh().b[1][0]++;cov_1rrmj6v3vh().s[10]++;return new NotAllowedError(`user with id ${id} is deactivated`);}else{cov_1rrmj6v3vh().b[1][1]++;}cov_1rrmj6v3vh().s[11]++;user.retrieved=moment().format('Y-MM-DD HH:mm:ss.SSS');cov_1rrmj6v3vh().s[12]++;return user.save();}).then(({name,username,email})=>{cov_1rrmj6v3vh().f[2]++;cov_1rrmj6v3vh().s[13]++;return{name,username,email};});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLXVzZXIuanMiXSwibmFtZXMiOlsidmFsaWRhdGUiLCJyZXF1aXJlIiwibW9kZWxzIiwiVXNlciIsIm1vbWVudCIsIk5vdEZvdW5kRXJyb3IiLCJOb3RBbGxvd2VkRXJyb3IiLCJtb2R1bGUiLCJleHBvcnRzIiwiaWQiLCJzdHJpbmciLCJmaW5kQnlJZCIsInRoZW4iLCJ1c2VyIiwiZGVhY3RpdmF0ZWQiLCJyZXRyaWV2ZWQiLCJmb3JtYXQiLCJzYXZlIiwibmFtZSIsInVzZXJuYW1lIiwiZW1haWwiXSwibWFwcGluZ3MiOiJxOUVBQUEsS0FBTSxDQUFFQSxRQUFGLDJCQUFlQyxPQUFPLENBQUMsYUFBRCxDQUF0QixDQUFOLENBQ0EsS0FBTSxDQUFFQyxNQUFNLENBQUUsQ0FBRUMsSUFBRixDQUFWLDJCQUF1QkYsT0FBTyxDQUFDLFlBQUQsQ0FBOUIsQ0FBTixDQUNBLEtBQU1HLENBQUFBLE1BQU0sMEJBQUdILE9BQU8sQ0FBQyxRQUFELENBQVYsQ0FBWixDQUNBLEtBQU0sQ0FBRUksYUFBRixDQUFpQkMsZUFBakIsMkJBQXFDTCxPQUFPLENBQUMsb0JBQUQsQ0FBNUMsQ0FBTixDLHdCQUVBTSxNQUFNLENBQUNDLE9BQVAsQ0FBaUJDLEVBQUUsRUFBSSxpREFDbkJULFFBQVEsQ0FBQ1UsTUFBVCxDQUFnQkQsRUFBaEIsQ0FBb0IsSUFBcEIsRUFEbUIsd0JBR25CLE1BQU9OLENBQUFBLElBQUksQ0FBQ1EsUUFBTCxDQUFjRixFQUFkLEVBQ0ZHLElBREUsQ0FDR0MsSUFBSSxFQUFJLGlEQUNWLEdBQUksQ0FBQ0EsSUFBTCxDQUFXLDBEQUFPLElBQUlSLENBQUFBLGFBQUosQ0FBbUIsZ0JBQWVJLEVBQUcsaUJBQXJDLENBQVAsQ0FBNkQsQ0FBeEUsaUNBRFUsd0JBRVYsR0FBSUksSUFBSSxDQUFDQyxXQUFULENBQXNCLDJEQUFPLElBQUlSLENBQUFBLGVBQUosQ0FBcUIsZ0JBQWVHLEVBQUcsaUJBQXZDLENBQVAsQ0FBK0QsQ0FBckYsaUNBRlUseUJBR1ZJLElBQUksQ0FBQ0UsU0FBTCxDQUFpQlgsTUFBTSxHQUFHWSxNQUFULENBQWdCLHNCQUFoQixDQUFqQixDQUhVLHlCQUtWLE1BQU9ILENBQUFBLElBQUksQ0FBQ0ksSUFBTCxFQUFQLENBQ0gsQ0FQRSxFQVFGTCxJQVJFLENBUUcsQ0FBQyxDQUFFTSxJQUFGLENBQVFDLFFBQVIsQ0FBa0JDLEtBQWxCLENBQUQsR0FBZ0MseURBQUVGLElBQUYsQ0FBUUMsUUFBUixDQUFrQkMsS0FBbEIsRUFBeUIsQ0FSNUQsQ0FBUCxDQVNILENBWkQiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHZhbGlkYXRlIH0gPSByZXF1aXJlKCdob29ydC11dGlscycpXG5jb25zdCB7IG1vZGVsczogeyBVc2VyIH0gfSA9IHJlcXVpcmUoJ2hvb3J0LWRhdGEnKVxuY29uc3QgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50JylcbmNvbnN0IHsgTm90Rm91bmRFcnJvciwgTm90QWxsb3dlZEVycm9yIH0gPSByZXF1aXJlKCcuLi8uLi9ob29ydC1lcnJvcnMnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlkID0+IHtcbiAgICB2YWxpZGF0ZS5zdHJpbmcoaWQsICdpZCcpXG5cbiAgICByZXR1cm4gVXNlci5maW5kQnlJZChpZClcbiAgICAgICAgLnRoZW4odXNlciA9PiB7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHJldHVybiBuZXcgTm90Rm91bmRFcnJvcihgdXNlciB3aXRoIGlkICR7aWR9IGRvZXMgbm90IGV4aXN0YClcbiAgICAgICAgICAgIGlmICh1c2VyLmRlYWN0aXZhdGVkKSByZXR1cm4gbmV3IE5vdEFsbG93ZWRFcnJvcihgdXNlciB3aXRoIGlkICR7aWR9IGlzIGRlYWN0aXZhdGVkYClcbiAgICAgICAgICAgIHVzZXIucmV0cmlldmVkID0gbW9tZW50KCkuZm9ybWF0KCdZLU1NLUREIEhIOm1tOnNzLlNTUycpXG5cbiAgICAgICAgICAgIHJldHVybiB1c2VyLnNhdmUoKVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigoeyBuYW1lLCB1c2VybmFtZSwgZW1haWwgfSkgPT4gKHsgbmFtZSwgdXNlcm5hbWUsIGVtYWlsIH0pKVxufSJdfQ==