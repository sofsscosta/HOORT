function cov_z0z15ystr(){var path="/Users/So/bootcamp/collab/skylab-bootcamp-202001/staff/sofia-costa/hoort/hoort-api/logic/delete-veggie-from-land.js";var hash="95e6a655d0371b8e352dcfff8fb4f52ed3c9c191";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/So/bootcamp/collab/skylab-bootcamp-202001/staff/sofia-costa/hoort/hoort-api/logic/delete-veggie-from-land.js",statementMap:{"0":{start:{line:1,column:21},end:{line:1,column:43}},"1":{start:{line:2,column:29},end:{line:2,column:50}},"2":{start:{line:3,column:28},end:{line:3,column:57}},"3":{start:{line:4,column:38},end:{line:4,column:57}},"4":{start:{line:6,column:0},end:{line:30,column:1}},"5":{start:{line:8,column:4},end:{line:8,column:29}},"6":{start:{line:9,column:4},end:{line:9,column:37}},"7":{start:{line:10,column:4},end:{line:10,column:37}},"8":{start:{line:12,column:15},end:{line:12,column:42}},"9":{start:{line:14,column:24},end:{line:14,column:89}},"10":{start:{line:14,column:54},end:{line:14,column:88}},"11":{start:{line:16,column:18},end:{line:16,column:72}},"12":{start:{line:16,column:43},end:{line:16,column:71}},"13":{start:{line:18,column:4},end:{line:29,column:94}},"14":{start:{line:18,column:17},end:{line:18,column:23}},"15":{start:{line:20,column:9},end:{line:29,column:94}},"16":{start:{line:20,column:43},end:{line:20,column:77}},"17":{start:{line:22,column:8},end:{line:22,column:73}},"18":{start:{line:24,column:8},end:{line:24,column:25}},"19":{start:{line:26,column:8},end:{line:26,column:14}},"20":{start:{line:29,column:9},end:{line:29,column:94}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:17},end:{line:6,column:18}},loc:{start:{line:6,column:47},end:{line:30,column:1}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:14,column:45},end:{line:14,column:46}},loc:{start:{line:14,column:54},end:{line:14,column:88}},line:14},"2":{name:"(anonymous_2)",decl:{start:{line:16,column:35},end:{line:16,column:36}},loc:{start:{line:16,column:43},end:{line:16,column:71}},line:16},"3":{name:"(anonymous_3)",decl:{start:{line:20,column:34},end:{line:20,column:35}},loc:{start:{line:20,column:43},end:{line:20,column:77}},line:20}},branchMap:{"0":{loc:{start:{line:18,column:4},end:{line:29,column:94}},type:"if",locations:[{start:{line:18,column:4},end:{line:29,column:94}},{start:{line:18,column:4},end:{line:29,column:94}}],line:18},"1":{loc:{start:{line:20,column:9},end:{line:29,column:94}},type:"if",locations:[{start:{line:20,column:9},end:{line:29,column:94}},{start:{line:20,column:9},end:{line:29,column:94}}],line:20}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"95e6a655d0371b8e352dcfff8fb4f52ed3c9c191"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_z0z15ystr=function(){return actualCoverage;};return actualCoverage;}cov_z0z15ystr();const{validate}=(cov_z0z15ystr().s[0]++,require('hoort-utils'));const{models:{Land}}=(cov_z0z15ystr().s[1]++,require('hoort-data'));const{NotAllowedError}=(cov_z0z15ystr().s[2]++,require('../../hoort-errors'));const{SchemaTypes:{ObjectId}}=(cov_z0z15ystr().s[3]++,require('mongoose'));cov_z0z15ystr().s[4]++;module.exports=async(id,landId,itemId)=>{cov_z0z15ystr().f[0]++;cov_z0z15ystr().s[5]++;validate.string(id,'id');cov_z0z15ystr().s[6]++;validate.string(landId,'landId');cov_z0z15ystr().s[7]++;validate.string(itemId,'itemId');let land=(cov_z0z15ystr().s[8]++,await Land.findById(landId));let plantedVeggie=(cov_z0z15ystr().s[9]++,land.plantation.find(plant=>{cov_z0z15ystr().f[1]++;cov_z0z15ystr().s[10]++;return plant.veggie.toString()===itemId;}));let isThere=(cov_z0z15ystr().s[11]++,land.scheme.find(line=>{cov_z0z15ystr().f[2]++;cov_z0z15ystr().s[12]++;return line.includes(plantedVeggie);}));cov_z0z15ystr().s[13]++;if(isThere){cov_z0z15ystr().b[0][0]++;cov_z0z15ystr().s[14]++;return;}else{cov_z0z15ystr().b[0][1]++;cov_z0z15ystr().s[15]++;if(land.plantation.find(plant=>{cov_z0z15ystr().f[3]++;cov_z0z15ystr().s[16]++;return plant.veggie.toString()===itemId;})!==undefined){cov_z0z15ystr().b[1][0]++;cov_z0z15ystr().s[17]++;land.plantation.splice(land.plantation.indexOf(plantedVeggie),1);cov_z0z15ystr().s[18]++;await land.save();cov_z0z15ystr().s[19]++;return;}else{cov_z0z15ystr().b[1][1]++;cov_z0z15ystr().s[20]++;throw new Error('this veggie is neither on this land nor on this land\'s plantation');}}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlbGV0ZS12ZWdnaWUtZnJvbS1sYW5kLmpzIl0sIm5hbWVzIjpbInZhbGlkYXRlIiwicmVxdWlyZSIsIm1vZGVscyIsIkxhbmQiLCJOb3RBbGxvd2VkRXJyb3IiLCJTY2hlbWFUeXBlcyIsIk9iamVjdElkIiwibW9kdWxlIiwiZXhwb3J0cyIsImlkIiwibGFuZElkIiwiaXRlbUlkIiwic3RyaW5nIiwibGFuZCIsImZpbmRCeUlkIiwicGxhbnRlZFZlZ2dpZSIsInBsYW50YXRpb24iLCJmaW5kIiwicGxhbnQiLCJ2ZWdnaWUiLCJ0b1N0cmluZyIsImlzVGhlcmUiLCJzY2hlbWUiLCJsaW5lIiwiaW5jbHVkZXMiLCJ1bmRlZmluZWQiLCJzcGxpY2UiLCJpbmRleE9mIiwic2F2ZSIsIkVycm9yIl0sIm1hcHBpbmdzIjoibWpHQUFBLEtBQU0sQ0FBRUEsUUFBRiwwQkFBZUMsT0FBTyxDQUFDLGFBQUQsQ0FBdEIsQ0FBTixDQUNBLEtBQU0sQ0FBRUMsTUFBTSxDQUFFLENBQUVDLElBQUYsQ0FBViwwQkFBdUJGLE9BQU8sQ0FBQyxZQUFELENBQTlCLENBQU4sQ0FDQSxLQUFNLENBQUVHLGVBQUYsMEJBQXNCSCxPQUFPLENBQUMsb0JBQUQsQ0FBN0IsQ0FBTixDQUNBLEtBQU0sQ0FBRUksV0FBVyxDQUFFLENBQUVDLFFBQUYsQ0FBZiwwQkFBZ0NMLE9BQU8sQ0FBQyxVQUFELENBQXZDLENBQU4sQyx1QkFFQU0sTUFBTSxDQUFDQyxPQUFQLENBQWlCLE1BQU9DLEVBQVAsQ0FBV0MsTUFBWCxDQUFtQkMsTUFBbkIsR0FBOEIsK0NBRTNDWCxRQUFRLENBQUNZLE1BQVQsQ0FBZ0JILEVBQWhCLENBQW9CLElBQXBCLEVBRjJDLHVCQUczQ1QsUUFBUSxDQUFDWSxNQUFULENBQWdCRixNQUFoQixDQUF3QixRQUF4QixFQUgyQyx1QkFJM0NWLFFBQVEsQ0FBQ1ksTUFBVCxDQUFnQkQsTUFBaEIsQ0FBd0IsUUFBeEIsRUFFQSxHQUFJRSxDQUFBQSxJQUFJLHlCQUFHLEtBQU1WLENBQUFBLElBQUksQ0FBQ1csUUFBTCxDQUFjSixNQUFkLENBQVQsQ0FBUixDQUVBLEdBQUlLLENBQUFBLGFBQWEseUJBQUdGLElBQUksQ0FBQ0csVUFBTCxDQUFnQkMsSUFBaEIsQ0FBcUJDLEtBQUssRUFBSSxzREFBQUEsQ0FBQUEsS0FBSyxDQUFDQyxNQUFOLENBQWFDLFFBQWIsS0FBNEJULE1BQTVCLENBQWtDLENBQWhFLENBQUgsQ0FBakIsQ0FFQSxHQUFJVSxDQUFBQSxPQUFPLDBCQUFHUixJQUFJLENBQUNTLE1BQUwsQ0FBWUwsSUFBWixDQUFpQk0sSUFBSSxFQUFJLHNEQUFBQSxDQUFBQSxJQUFJLENBQUNDLFFBQUwsQ0FBY1QsYUFBZCxFQUE0QixDQUFyRCxDQUFILENBQVgsQ0FWMkMsd0JBWTNDLEdBQUlNLE9BQUosQ0FBYSwwREFBTSxDQUFuQixJQUVLLHNEQUFJUixJQUFJLENBQUNHLFVBQUwsQ0FBZ0JDLElBQWhCLENBQXFCQyxLQUFLLEVBQUksc0RBQUFBLENBQUFBLEtBQUssQ0FBQ0MsTUFBTixDQUFhQyxRQUFiLEtBQTRCVCxNQUE1QixDQUFrQyxDQUFoRSxJQUFzRWMsU0FBMUUsQ0FBcUYsbURBRXRGWixJQUFJLENBQUNHLFVBQUwsQ0FBZ0JVLE1BQWhCLENBQXVCYixJQUFJLENBQUNHLFVBQUwsQ0FBZ0JXLE9BQWhCLENBQXdCWixhQUF4QixDQUF2QixDQUErRCxDQUEvRCxFQUZzRix3QkFJdEYsS0FBTUYsQ0FBQUEsSUFBSSxDQUFDZSxJQUFMLEVBQU4sQ0FKc0Ysd0JBTXRGLE9BQ0gsQ0FQSSxJQVNBLHdEQUFNLElBQUlDLENBQUFBLEtBQUosQ0FBVSxvRUFBVixDQUFOLENBQXFGLEVBQzdGLENBeEJEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyB2YWxpZGF0ZSB9ID0gcmVxdWlyZSgnaG9vcnQtdXRpbHMnKVxuY29uc3QgeyBtb2RlbHM6IHsgTGFuZCB9IH0gPSByZXF1aXJlKCdob29ydC1kYXRhJylcbmNvbnN0IHsgTm90QWxsb3dlZEVycm9yIH0gPSByZXF1aXJlKCcuLi8uLi9ob29ydC1lcnJvcnMnKVxuY29uc3QgeyBTY2hlbWFUeXBlczogeyBPYmplY3RJZCB9IH0gPSByZXF1aXJlKCdtb25nb29zZScpXG5cbm1vZHVsZS5leHBvcnRzID0gYXN5bmMgKGlkLCBsYW5kSWQsIGl0ZW1JZCkgPT4ge1xuXG4gICAgdmFsaWRhdGUuc3RyaW5nKGlkLCAnaWQnKVxuICAgIHZhbGlkYXRlLnN0cmluZyhsYW5kSWQsICdsYW5kSWQnKVxuICAgIHZhbGlkYXRlLnN0cmluZyhpdGVtSWQsICdpdGVtSWQnKVxuXG4gICAgbGV0IGxhbmQgPSBhd2FpdCBMYW5kLmZpbmRCeUlkKGxhbmRJZClcblxuICAgIGxldCBwbGFudGVkVmVnZ2llID0gbGFuZC5wbGFudGF0aW9uLmZpbmQocGxhbnQgPT4gcGxhbnQudmVnZ2llLnRvU3RyaW5nKCkgPT09IGl0ZW1JZClcblxuICAgIGxldCBpc1RoZXJlID0gbGFuZC5zY2hlbWUuZmluZChsaW5lID0+IGxpbmUuaW5jbHVkZXMocGxhbnRlZFZlZ2dpZSkpXG5cbiAgICBpZiAoaXNUaGVyZSkgcmV0dXJuXG5cbiAgICBlbHNlIGlmIChsYW5kLnBsYW50YXRpb24uZmluZChwbGFudCA9PiBwbGFudC52ZWdnaWUudG9TdHJpbmcoKSA9PT0gaXRlbUlkKSAhPT0gdW5kZWZpbmVkKSB7XG5cbiAgICAgICAgbGFuZC5wbGFudGF0aW9uLnNwbGljZShsYW5kLnBsYW50YXRpb24uaW5kZXhPZihwbGFudGVkVmVnZ2llKSwgMSlcblxuICAgICAgICBhd2FpdCBsYW5kLnNhdmUoKVxuXG4gICAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGVsc2UgdGhyb3cgbmV3IEVycm9yKCd0aGlzIHZlZ2dpZSBpcyBuZWl0aGVyIG9uIHRoaXMgbGFuZCBub3Igb24gdGhpcyBsYW5kXFwncyBwbGFudGF0aW9uJylcbn0iXX0=