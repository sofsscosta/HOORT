function cov_lm2x8ykxn(){var path="/Users/So/bootcamp/collab/skylab-bootcamp-202001/staff/sofia-costa/hoort/hoort-api/logic/retrieve-user-veggies.js";var hash="569d27d0747f6c5528abb56972dcd19720c20d70";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/So/bootcamp/collab/skylab-bootcamp-202001/staff/sofia-costa/hoort/hoort-api/logic/retrieve-user-veggies.js",statementMap:{"0":{start:{line:1,column:21},end:{line:1,column:43}},"1":{start:{line:2,column:41},end:{line:2,column:62}},"2":{start:{line:3,column:26},end:{line:3,column:55}},"3":{start:{line:5,column:0},end:{line:34,column:1}},"4":{start:{line:6,column:4},end:{line:6,column:37}},"5":{start:{line:8,column:18},end:{line:8,column:20}},"6":{start:{line:9,column:18},end:{line:9,column:20}},"7":{start:{line:11,column:4},end:{line:11,column:12}},"8":{start:{line:12,column:15},end:{line:12,column:42}},"9":{start:{line:14,column:20},end:{line:14,column:30}},"10":{start:{line:16,column:18},end:{line:19,column:7}},"11":{start:{line:17,column:19},end:{line:17,column:60}},"12":{start:{line:18,column:8},end:{line:18,column:30}},"13":{start:{line:21,column:4},end:{line:24,column:5}},"14":{start:{line:23,column:8},end:{line:23,column:135}},"15":{start:{line:23,column:45},end:{line:23,column:132}},"16":{start:{line:23,column:94},end:{line:23,column:132}},"17":{start:{line:26,column:4},end:{line:31,column:5}},"18":{start:{line:28,column:18},end:{line:28,column:45}},"19":{start:{line:30,column:8},end:{line:30,column:52}},"20":{start:{line:33,column:4},end:{line:33,column:18}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:5,column:17},end:{line:5,column:18}},loc:{start:{line:5,column:35},end:{line:34,column:1}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:16,column:50},end:{line:16,column:51}},loc:{start:{line:16,column:65},end:{line:19,column:5}},line:16},"2":{name:"(anonymous_2)",decl:{start:{line:23,column:33},end:{line:23,column:34}},loc:{start:{line:23,column:43},end:{line:23,column:134}},line:23}},branchMap:{"0":{loc:{start:{line:23,column:45},end:{line:23,column:132}},type:"if",locations:[{start:{line:23,column:45},end:{line:23,column:132}},{start:{line:23,column:45},end:{line:23,column:132}}],line:23}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"569d27d0747f6c5528abb56972dcd19720c20d70"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_lm2x8ykxn=function(){return actualCoverage;};return actualCoverage;}cov_lm2x8ykxn();const{validate}=(cov_lm2x8ykxn().s[0]++,require('hoort-utils'));const{models:{User,Land,Item}}=(cov_lm2x8ykxn().s[1]++,require('hoort-data'));const{NotFoundError}=(cov_lm2x8ykxn().s[2]++,require('../../hoort-errors'));cov_lm2x8ykxn().s[3]++;module.exports=async userId=>{cov_lm2x8ykxn().f[0]++;cov_lm2x8ykxn().s[4]++;validate.string(userId,'userId');let veggies=(cov_lm2x8ykxn().s[5]++,[]);let results=(cov_lm2x8ykxn().s[6]++,[]);// let lands = []
cov_lm2x8ykxn().s[7]++;debugger;let user=(cov_lm2x8ykxn().s[8]++,await User.findById(userId));let userLands=(cov_lm2x8ykxn().s[9]++,user.lands);const lands=(cov_lm2x8ykxn().s[10]++,await Promise.all(userLands.map(async _land=>{cov_lm2x8ykxn().f[1]++;let land=(cov_lm2x8ykxn().s[11]++,await Land.findById(_land._id.toString()));cov_lm2x8ykxn().s[12]++;return land.toObject();})));cov_lm2x8ykxn().s[13]++;for(let _land of lands){cov_lm2x8ykxn().s[14]++;_land.plantation.forEach(veggie=>{cov_lm2x8ykxn().f[2]++;cov_lm2x8ykxn().s[15]++;if(!veggies.includes(veggie.veggie.toString())){cov_lm2x8ykxn().b[0][0]++;cov_lm2x8ykxn().s[16]++;veggies.push(veggie.veggie.toString());}else{cov_lm2x8ykxn().b[0][1]++;}});}cov_lm2x8ykxn().s[17]++;for(let veggie of veggies){let veg=(cov_lm2x8ykxn().s[18]++,await Item.findById(veggie));cov_lm2x8ykxn().s[19]++;results.push({id:veg.id,name:veg.name});}cov_lm2x8ykxn().s[20]++;return results;};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLXVzZXItdmVnZ2llcy5qcyJdLCJuYW1lcyI6WyJ2YWxpZGF0ZSIsInJlcXVpcmUiLCJtb2RlbHMiLCJVc2VyIiwiTGFuZCIsIkl0ZW0iLCJOb3RGb3VuZEVycm9yIiwibW9kdWxlIiwiZXhwb3J0cyIsInVzZXJJZCIsInN0cmluZyIsInZlZ2dpZXMiLCJyZXN1bHRzIiwidXNlciIsImZpbmRCeUlkIiwidXNlckxhbmRzIiwibGFuZHMiLCJQcm9taXNlIiwiYWxsIiwibWFwIiwiX2xhbmQiLCJsYW5kIiwiX2lkIiwidG9TdHJpbmciLCJ0b09iamVjdCIsInBsYW50YXRpb24iLCJmb3JFYWNoIiwidmVnZ2llIiwiaW5jbHVkZXMiLCJwdXNoIiwidmVnIiwiaWQiLCJuYW1lIl0sIm1hcHBpbmdzIjoiaXRGQUFBLEtBQU0sQ0FBRUEsUUFBRiwwQkFBZUMsT0FBTyxDQUFDLGFBQUQsQ0FBdEIsQ0FBTixDQUNBLEtBQU0sQ0FBRUMsTUFBTSxDQUFFLENBQUVDLElBQUYsQ0FBUUMsSUFBUixDQUFjQyxJQUFkLENBQVYsMEJBQW1DSixPQUFPLENBQUMsWUFBRCxDQUExQyxDQUFOLENBQ0EsS0FBTSxDQUFFSyxhQUFGLDBCQUFvQkwsT0FBTyxDQUFDLG9CQUFELENBQTNCLENBQU4sQyx1QkFFQU0sTUFBTSxDQUFDQyxPQUFQLENBQWlCLEtBQU9DLENBQUFBLE1BQVAsRUFBa0IsK0NBQy9CVCxRQUFRLENBQUNVLE1BQVQsQ0FBZ0JELE1BQWhCLENBQXdCLFFBQXhCLEVBRUEsR0FBSUUsQ0FBQUEsT0FBTyx5QkFBRyxFQUFILENBQVgsQ0FDQSxHQUFJQyxDQUFBQSxPQUFPLHlCQUFHLEVBQUgsQ0FBWCxDQUNBO0FBTCtCLHVCQU0vQixTQUNBLEdBQUlDLENBQUFBLElBQUkseUJBQUcsS0FBTVYsQ0FBQUEsSUFBSSxDQUFDVyxRQUFMLENBQWNMLE1BQWQsQ0FBVCxDQUFSLENBRUEsR0FBSU0sQ0FBQUEsU0FBUyx5QkFBR0YsSUFBSSxDQUFDRyxLQUFSLENBQWIsQ0FFQSxLQUFNQSxDQUFBQSxLQUFLLDBCQUFHLEtBQU1DLENBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZSCxTQUFTLENBQUNJLEdBQVYsQ0FBYyxLQUFNQyxDQUFBQSxLQUFOLEVBQWUsd0JBQ3pELEdBQUlDLENBQUFBLElBQUksMEJBQUcsS0FBTWpCLENBQUFBLElBQUksQ0FBQ1UsUUFBTCxDQUFjTSxLQUFLLENBQUNFLEdBQU4sQ0FBVUMsUUFBVixFQUFkLENBQVQsQ0FBUixDQUR5RCx3QkFFekQsTUFBT0YsQ0FBQUEsSUFBSSxDQUFDRyxRQUFMLEVBQVAsQ0FDSCxDQUgrQixDQUFaLENBQVQsQ0FBWCxDQVgrQix3QkFnQi9CLElBQUssR0FBSUosQ0FBQUEsS0FBVCxHQUFrQkosQ0FBQUEsS0FBbEIsQ0FBeUIseUJBRXJCSSxLQUFLLENBQUNLLFVBQU4sQ0FBaUJDLE9BQWpCLENBQXlCQyxNQUFNLEVBQUksZ0RBQUUsR0FBSSxDQUFDaEIsT0FBTyxDQUFDaUIsUUFBUixDQUFpQkQsTUFBTSxDQUFDQSxNQUFQLENBQWNKLFFBQWQsRUFBakIsQ0FBTCxDQUFpRCxtREFBQVosT0FBTyxDQUFDa0IsSUFBUixDQUFhRixNQUFNLENBQUNBLE1BQVAsQ0FBY0osUUFBZCxFQUFiLEVBQXNDLENBQXZGLGdDQUF5RixDQUE5SCxFQUNILENBbkI4Qix3QkFxQi9CLElBQUssR0FBSUksQ0FBQUEsTUFBVCxHQUFtQmhCLENBQUFBLE9BQW5CLENBQTRCLENBRXhCLEdBQUltQixDQUFBQSxHQUFHLDBCQUFHLEtBQU16QixDQUFBQSxJQUFJLENBQUNTLFFBQUwsQ0FBY2EsTUFBZCxDQUFULENBQVAsQ0FGd0Isd0JBSXhCZixPQUFPLENBQUNpQixJQUFSLENBQWEsQ0FBRUUsRUFBRSxDQUFFRCxHQUFHLENBQUNDLEVBQVYsQ0FBY0MsSUFBSSxDQUFFRixHQUFHLENBQUNFLElBQXhCLENBQWIsRUFDSCxDQTFCOEIsd0JBNEIvQixNQUFPcEIsQ0FBQUEsT0FBUCxDQUNILENBN0JEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyB2YWxpZGF0ZSB9ID0gcmVxdWlyZSgnaG9vcnQtdXRpbHMnKVxuY29uc3QgeyBtb2RlbHM6IHsgVXNlciwgTGFuZCwgSXRlbSB9IH0gPSByZXF1aXJlKCdob29ydC1kYXRhJylcbmNvbnN0IHsgTm90Rm91bmRFcnJvciB9ID0gcmVxdWlyZSgnLi4vLi4vaG9vcnQtZXJyb3JzJylcblxubW9kdWxlLmV4cG9ydHMgPSBhc3luYyAodXNlcklkKSA9PiB7XG4gICAgdmFsaWRhdGUuc3RyaW5nKHVzZXJJZCwgJ3VzZXJJZCcpXG5cbiAgICBsZXQgdmVnZ2llcyA9IFtdXG4gICAgbGV0IHJlc3VsdHMgPSBbXVxuICAgIC8vIGxldCBsYW5kcyA9IFtdXG4gICAgZGVidWdnZXJcbiAgICBsZXQgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKVxuXG4gICAgbGV0IHVzZXJMYW5kcyA9IHVzZXIubGFuZHNcblxuICAgIGNvbnN0IGxhbmRzID0gYXdhaXQgUHJvbWlzZS5hbGwodXNlckxhbmRzLm1hcChhc3luYyBfbGFuZCA9PiB7XG4gICAgICAgIGxldCBsYW5kID0gYXdhaXQgTGFuZC5maW5kQnlJZChfbGFuZC5faWQudG9TdHJpbmcoKSlcbiAgICAgICAgcmV0dXJuIGxhbmQudG9PYmplY3QoKVxuICAgIH0pKVxuXG4gICAgZm9yIChsZXQgX2xhbmQgb2YgbGFuZHMpIHtcblxuICAgICAgICBfbGFuZC5wbGFudGF0aW9uLmZvckVhY2godmVnZ2llID0+IHsgaWYgKCF2ZWdnaWVzLmluY2x1ZGVzKHZlZ2dpZS52ZWdnaWUudG9TdHJpbmcoKSkpIHZlZ2dpZXMucHVzaCh2ZWdnaWUudmVnZ2llLnRvU3RyaW5nKCkpIH0pXG4gICAgfVxuXG4gICAgZm9yIChsZXQgdmVnZ2llIG9mIHZlZ2dpZXMpIHtcblxuICAgICAgICBsZXQgdmVnID0gYXdhaXQgSXRlbS5maW5kQnlJZCh2ZWdnaWUpXG5cbiAgICAgICAgcmVzdWx0cy5wdXNoKHsgaWQ6IHZlZy5pZCwgbmFtZTogdmVnLm5hbWUgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0c1xufSJdfQ==