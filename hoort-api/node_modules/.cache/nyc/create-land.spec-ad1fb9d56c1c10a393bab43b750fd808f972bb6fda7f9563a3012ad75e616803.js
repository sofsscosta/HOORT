function cov_w0eludqjq(){var path="/Users/So/bootcamp/collab/skylab-bootcamp-202001/staff/sofia-costa/hoort/hoort-api/logic/create-land.spec.js";var hash="07886112a6262c5a1ddd477be07e7feaa8001e89";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/So/bootcamp/collab/skylab-bootcamp-202001/staff/sofia-costa/hoort/hoort-api/logic/create-land.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:38},end:{line:3,column:45}},"2":{start:{line:4,column:35},end:{line:4,column:56}},"3":{start:{line:6,column:19},end:{line:6,column:34}},"4":{start:{line:7,column:19},end:{line:7,column:23}},"5":{start:{line:8,column:19},end:{line:8,column:43}},"6":{start:{line:9,column:21},end:{line:9,column:42}},"7":{start:{line:11,column:0},end:{line:128,column:2}},"8":{start:{line:12,column:4},end:{line:12,column:105}},"9":{start:{line:12,column:17},end:{line:12,column:104}},"10":{start:{line:16,column:4},end:{line:46,column:6}},"11":{start:{line:17,column:8},end:{line:17,column:41}},"12":{start:{line:18,column:8},end:{line:18,column:41}},"13":{start:{line:19,column:8},end:{line:19,column:44}},"14":{start:{line:20,column:8},end:{line:20,column:41}},"15":{start:{line:22,column:8},end:{line:22,column:33}},"16":{start:{line:23,column:8},end:{line:23,column:41}},"17":{start:{line:24,column:8},end:{line:24,column:41}},"18":{start:{line:26,column:8},end:{line:26,column:22}},"19":{start:{line:28,column:8},end:{line:29,column:49}},"20":{start:{line:28,column:21},end:{line:28,column:22}},"21":{start:{line:29,column:12},end:{line:29,column:49}},"22":{start:{line:31,column:8},end:{line:31,column:37}},"23":{start:{line:33,column:8},end:{line:38,column:9}},"24":{start:{line:34,column:12},end:{line:37,column:38}},"25":{start:{line:34,column:27},end:{line:34,column:70}},"26":{start:{line:34,column:40},end:{line:34,column:41}},"27":{start:{line:34,column:55},end:{line:34,column:70}},"28":{start:{line:36,column:17},end:{line:37,column:38}},"29":{start:{line:36,column:30},end:{line:36,column:31}},"30":{start:{line:37,column:16},end:{line:37,column:38}},"31":{start:{line:40,column:8},end:{line:45,column:28}},"32":{start:{line:42,column:16},end:{line:42,column:28}},"33":{start:{line:43,column:16},end:{line:43,column:33}},"34":{start:{line:48,column:4},end:{line:66,column:6}},"35":{start:{line:50,column:8},end:{line:65,column:14}},"36":{start:{line:51,column:24},end:{line:51,column:46}},"37":{start:{line:53,column:16},end:{line:53,column:37}},"38":{start:{line:54,column:16},end:{line:54,column:28}},"39":{start:{line:55,column:16},end:{line:55,column:48}},"40":{start:{line:56,column:16},end:{line:56,column:63}},"41":{start:{line:57,column:16},end:{line:57,column:56}},"42":{start:{line:58,column:16},end:{line:58,column:56}},"43":{start:{line:61,column:24},end:{line:61,column:51}},"44":{start:{line:63,column:16},end:{line:63,column:37}},"45":{start:{line:64,column:16},end:{line:64,column:49}},"46":{start:{line:68,column:4},end:{line:75,column:6}},"47":{start:{line:69,column:8},end:{line:74,column:14}},"48":{start:{line:70,column:24},end:{line:70,column:46}},"49":{start:{line:72,column:16},end:{line:72,column:28}},"50":{start:{line:73,column:16},end:{line:73,column:50}},"51":{start:{line:102,column:4},end:{line:111,column:6}},"52":{start:{line:104,column:8},end:{line:110,column:14}},"53":{start:{line:105,column:24},end:{line:105,column:68}},"54":{start:{line:106,column:26},end:{line:106,column:72}},"55":{start:{line:108,column:16},end:{line:108,column:38}},"56":{start:{line:109,column:16},end:{line:109,column:102}},"57":{start:{line:113,column:4},end:{line:121,column:6}},"58":{start:{line:114,column:8},end:{line:114,column:58}},"59":{start:{line:116,column:19},end:{line:116,column:54}},"60":{start:{line:118,column:8},end:{line:118,column:42}},"61":{start:{line:120,column:8},end:{line:120,column:58}},"62":{start:{line:123,column:4},end:{line:125,column:6}},"63":{start:{line:124,column:8},end:{line:124,column:38}},"64":{start:{line:127,column:4},end:{line:127,column:38}},"65":{start:{line:127,column:16},end:{line:127,column:37}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:11,column:23},end:{line:11,column:24}},loc:{start:{line:11,column:29},end:{line:128,column:1}},line:11},"1":{name:"(anonymous_1)",decl:{start:{line:12,column:11},end:{line:12,column:12}},loc:{start:{line:12,column:17},end:{line:12,column:104}},line:12},"2":{name:"(anonymous_2)",decl:{start:{line:16,column:15},end:{line:16,column:16}},loc:{start:{line:16,column:21},end:{line:46,column:5}},line:16},"3":{name:"(anonymous_3)",decl:{start:{line:41,column:18},end:{line:41,column:19}},loc:{start:{line:41,column:27},end:{line:44,column:13}},line:41},"4":{name:"(anonymous_4)",decl:{start:{line:45,column:18},end:{line:45,column:19}},loc:{start:{line:45,column:24},end:{line:45,column:27}},line:45},"5":{name:"(anonymous_5)",decl:{start:{line:48,column:39},end:{line:48,column:40}},loc:{start:{line:48,column:45},end:{line:66,column:5}},line:48},"6":{name:"(anonymous_6)",decl:{start:{line:51,column:18},end:{line:51,column:19}},loc:{start:{line:51,column:24},end:{line:51,column:46}},line:51},"7":{name:"(anonymous_7)",decl:{start:{line:52,column:18},end:{line:52,column:19}},loc:{start:{line:52,column:26},end:{line:60,column:13}},line:52},"8":{name:"(anonymous_8)",decl:{start:{line:61,column:18},end:{line:61,column:19}},loc:{start:{line:61,column:24},end:{line:61,column:51}},line:61},"9":{name:"(anonymous_9)",decl:{start:{line:62,column:18},end:{line:62,column:19}},loc:{start:{line:62,column:26},end:{line:65,column:13}},line:62},"10":{name:"(anonymous_10)",decl:{start:{line:68,column:48},end:{line:68,column:49}},loc:{start:{line:68,column:54},end:{line:75,column:5}},line:68},"11":{name:"(anonymous_11)",decl:{start:{line:70,column:18},end:{line:70,column:19}},loc:{start:{line:70,column:24},end:{line:70,column:46}},line:70},"12":{name:"(anonymous_12)",decl:{start:{line:71,column:18},end:{line:71,column:19}},loc:{start:{line:71,column:26},end:{line:74,column:13}},line:71},"13":{name:"(anonymous_13)",decl:{start:{line:102,column:39},end:{line:102,column:40}},loc:{start:{line:102,column:45},end:{line:111,column:5}},line:102},"14":{name:"(anonymous_14)",decl:{start:{line:105,column:18},end:{line:105,column:19}},loc:{start:{line:105,column:24},end:{line:105,column:68}},line:105},"15":{name:"(anonymous_15)",decl:{start:{line:106,column:18},end:{line:106,column:19}},loc:{start:{line:106,column:24},end:{line:106,column:74}},line:106},"16":{name:"(anonymous_16)",decl:{start:{line:107,column:19},end:{line:107,column:20}},loc:{start:{line:107,column:28},end:{line:110,column:13}},line:107},"17":{name:"(anonymous_17)",decl:{start:{line:113,column:46},end:{line:113,column:47}},loc:{start:{line:113,column:58},end:{line:121,column:5}},line:113},"18":{name:"(anonymous_18)",decl:{start:{line:123,column:14},end:{line:123,column:15}},loc:{start:{line:123,column:20},end:{line:125,column:5}},line:123},"19":{name:"(anonymous_19)",decl:{start:{line:127,column:10},end:{line:127,column:11}},loc:{start:{line:127,column:16},end:{line:127,column:37}},line:127}},branchMap:{"0":{loc:{start:{line:34,column:12},end:{line:37,column:38}},type:"if",locations:[{start:{line:34,column:12},end:{line:37,column:38}},{start:{line:34,column:12},end:{line:37,column:38}}],line:34}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"07886112a6262c5a1ddd477be07e7feaa8001e89"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_w0eludqjq=function(){return actualCoverage;};return actualCoverage;}cov_w0eludqjq();cov_w0eludqjq().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL}}=(cov_w0eludqjq().s[1]++,process);const{models:{User,Land}}=(cov_w0eludqjq().s[2]++,require('hoort-data'));//const { SchemaTypes: { ObjectId } } = require('mongoose')
const{expect}=(cov_w0eludqjq().s[3]++,require('chai'));const{random}=(cov_w0eludqjq().s[4]++,Math);const createLand=(cov_w0eludqjq().s[5]++,require('./create-land'));const{mongoose}=(cov_w0eludqjq().s[6]++,require('hoort-data'));cov_w0eludqjq().s[7]++;describe('createLand',()=>{cov_w0eludqjq().f[0]++;cov_w0eludqjq().s[8]++;before(()=>{cov_w0eludqjq().f[1]++;cov_w0eludqjq().s[9]++;return mongoose.connect(TEST_MONGODB_URL,{useNewUrlParser:true,useUnifiedTopology:true});});let id,veggiesId,name,userId,location,soiltype,scheme,nameUser,username,email,password,user;cov_w0eludqjq().s[10]++;beforeEach(()=>{cov_w0eludqjq().f[2]++;cov_w0eludqjq().s[11]++;nameUser=`nameUser-${random()}`;cov_w0eludqjq().s[12]++;username=`username-${random()}`;cov_w0eludqjq().s[13]++;email=`email-${random()}@mail.com`;cov_w0eludqjq().s[14]++;password=`password-${random()}`;cov_w0eludqjq().s[15]++;name=`name-${random()}`;cov_w0eludqjq().s[16]++;location=`location-${random()}`;cov_w0eludqjq().s[17]++;soiltype=`soiltype-${random()}`;cov_w0eludqjq().s[18]++;veggiesId=[];cov_w0eludqjq().s[19]++;for(let i=(cov_w0eludqjq().s[20]++,0);i<10;i++){cov_w0eludqjq().s[21]++;veggiesId.push(`veggies-${random()}`);}cov_w0eludqjq().s[22]++;scheme=[[],[],[],[],[]];cov_w0eludqjq().s[23]++;for(let arr of scheme){cov_w0eludqjq().s[24]++;if(arr===0){cov_w0eludqjq().b[0][0]++;cov_w0eludqjq().s[25]++;for(let j=(cov_w0eludqjq().s[26]++,0);j<3;j++){cov_w0eludqjq().s[27]++;arr.push(false);}}else{cov_w0eludqjq().b[0][1]++;cov_w0eludqjq().s[28]++;for(let j=(cov_w0eludqjq().s[29]++,0);j<3;j++){cov_w0eludqjq().s[30]++;arr.push(veggiesId[j]);}}}cov_w0eludqjq().s[31]++;return User.create({name:nameUser,username,email,password}).then(_user=>{cov_w0eludqjq().f[3]++;cov_w0eludqjq().s[32]++;user=_user;cov_w0eludqjq().s[33]++;userId=_user.id;}).then(()=>{cov_w0eludqjq().f[4]++;});});cov_w0eludqjq().s[34]++;it('should succeed on valid data',()=>{cov_w0eludqjq().f[5]++;cov_w0eludqjq().s[35]++;return createLand(name,userId,location,soiltype).then(()=>{cov_w0eludqjq().f[6]++;cov_w0eludqjq().s[36]++;return Land.findOne({name});}).then(item=>{cov_w0eludqjq().f[7]++;cov_w0eludqjq().s[37]++;expect(item).to.exist;cov_w0eludqjq().s[38]++;id=item.id;cov_w0eludqjq().s[39]++;expect(item.name).to.equal(name);cov_w0eludqjq().s[40]++;expect(item.userId.toString()).to.equal(userId);cov_w0eludqjq().s[41]++;expect(item.location).to.equal(location);cov_w0eludqjq().s[42]++;expect(item.soiltype).to.equal(soiltype);//expect(item.scheme).to.eql(scheme)              
}).then(()=>{cov_w0eludqjq().f[8]++;cov_w0eludqjq().s[43]++;return User.findOne({lands:id});}).then(user=>{cov_w0eludqjq().f[9]++;cov_w0eludqjq().s[44]++;expect(user).to.exist;cov_w0eludqjq().s[45]++;expect(user.lands).to.include(id);});});cov_w0eludqjq().s[46]++;it('should not fail on not defined scheme',()=>{cov_w0eludqjq().f[10]++;cov_w0eludqjq().s[47]++;return createLand(name,userId,location,soiltype,scheme).then(()=>{cov_w0eludqjq().f[11]++;cov_w0eludqjq().s[48]++;return Land.findOne({name});}).then(item=>{cov_w0eludqjq().f[12]++;cov_w0eludqjq().s[49]++;id=item.id;cov_w0eludqjq().s[50]++;expect(item.scheme).to.eql(scheme);});});// it('should fail if scheme is not of a valid format', () => {
//     return createLand(name, userId, location, soiltype)
//         .then(() => { throw new Error('should not reach this point') })
//         .catch(error => {
//             expect(error).to.exist
//             expect(error.message).to.eql('scheme is not an array')
//         })
// expect(() => {
//     return createLand(name, userId, location, soiltype, [{ line: false, line: false, line: false, line: false, line: false }])
// }).to.throw(TypeError, 'scheme is not an array')
// })
// it('should fail on not all fields defined except scheme', () => {
//     return createLand(name, userId, location, soiltype)
//         .then(() => { throw new Error('should not reach this point') })
//         .catch(error => {
//             expect(error).to.exist
//             expect(error.message).to.eql('soiltype undefined is not a string')
//         })
//     // expect(() => createLand(name, userId, location)
//     // ).to.throw(TypeError, 'soiltype undefined is not a string')
// })
cov_w0eludqjq().s[51]++;it('should fail on repeated name',()=>{cov_w0eludqjq().f[13]++;cov_w0eludqjq().s[52]++;return createLand(name,userId,location,soiltype).then(()=>{cov_w0eludqjq().f[14]++;cov_w0eludqjq().s[53]++;return createLand(name,userId,location,soiltype);}).then(()=>{cov_w0eludqjq().f[15]++;cov_w0eludqjq().s[54]++;throw new Error('should not reach this point');}).catch(error=>{cov_w0eludqjq().f[16]++;cov_w0eludqjq().s[55]++;expect(error).to.exist;cov_w0eludqjq().s[56]++;expect(error.message).to.eql(`You have already created a land with the name ${name}!`);});});cov_w0eludqjq().s[57]++;it('should add a new land to user.lands',async()=>{cov_w0eludqjq().f[17]++;cov_w0eludqjq().s[58]++;await createLand(name,userId,location,soiltype);let land=(cov_w0eludqjq().s[59]++,await Land.findOne({name}).lean());cov_w0eludqjq().s[60]++;user=await User.findById(userId);cov_w0eludqjq().s[61]++;expect(user.lands).to.include(land._id.toString());});cov_w0eludqjq().s[62]++;afterEach(()=>{cov_w0eludqjq().f[18]++;cov_w0eludqjq().s[63]++;Land.findByIdAndRemove({id});});cov_w0eludqjq().s[64]++;after(()=>{cov_w0eludqjq().f[19]++;cov_w0eludqjq().s[65]++;return mongoose.disconnect();});});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNyZWF0ZS1sYW5kLnNwZWMuanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImNvbmZpZyIsImVudiIsIlRFU1RfTU9OR09EQl9VUkwiLCJwcm9jZXNzIiwibW9kZWxzIiwiVXNlciIsIkxhbmQiLCJleHBlY3QiLCJyYW5kb20iLCJNYXRoIiwiY3JlYXRlTGFuZCIsIm1vbmdvb3NlIiwiZGVzY3JpYmUiLCJiZWZvcmUiLCJjb25uZWN0IiwidXNlTmV3VXJsUGFyc2VyIiwidXNlVW5pZmllZFRvcG9sb2d5IiwiaWQiLCJ2ZWdnaWVzSWQiLCJuYW1lIiwidXNlcklkIiwibG9jYXRpb24iLCJzb2lsdHlwZSIsInNjaGVtZSIsIm5hbWVVc2VyIiwidXNlcm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwidXNlciIsImJlZm9yZUVhY2giLCJpIiwicHVzaCIsImFyciIsImoiLCJjcmVhdGUiLCJ0aGVuIiwiX3VzZXIiLCJpdCIsImZpbmRPbmUiLCJpdGVtIiwidG8iLCJleGlzdCIsImVxdWFsIiwidG9TdHJpbmciLCJsYW5kcyIsImluY2x1ZGUiLCJlcWwiLCJFcnJvciIsImNhdGNoIiwiZXJyb3IiLCJtZXNzYWdlIiwibGFuZCIsImxlYW4iLCJmaW5kQnlJZCIsIl9pZCIsImFmdGVyRWFjaCIsImZpbmRCeUlkQW5kUmVtb3ZlIiwiYWZ0ZXIiLCJkaXNjb25uZWN0Il0sIm1hcHBpbmdzIjoiNHBRQUFBQSxPQUFPLENBQUMsUUFBRCxDQUFQLENBQWtCQyxNQUFsQixHQUVBLEtBQU0sQ0FBRUMsR0FBRyxDQUFFLENBQUVDLGdCQUFGLENBQVAsMEJBQWdDQyxPQUFoQyxDQUFOLENBQ0EsS0FBTSxDQUFFQyxNQUFNLENBQUUsQ0FBRUMsSUFBRixDQUFRQyxJQUFSLENBQVYsMEJBQTZCUCxPQUFPLENBQUMsWUFBRCxDQUFwQyxDQUFOLENBQ0E7QUFDQSxLQUFNLENBQUVRLE1BQUYsMEJBQWFSLE9BQU8sQ0FBQyxNQUFELENBQXBCLENBQU4sQ0FDQSxLQUFNLENBQUVTLE1BQUYs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Q0FEWSx3QkFFWmxDLE1BQU0sQ0FBQzBDLEtBQUssQ0FBQ0MsT0FBUCxDQUFOLENBQXNCVixFQUF0QixDQUF5Qk0sR0FBekIsQ0FBOEIsaURBQWdEM0IsSUFBSyxHQUFuRixFQUNILENBTkUsQ0FBUCxDQU9ILENBVEMsQ0FBRixDQTNGeUIsd0JBc0d6QmtCLEVBQUUsQ0FBQyxxQ0FBRCxDQUF3QyxTQUFZLGlEQUNsRCxLQUFNM0IsQ0FBQUEsVUFBVSxDQUFDUyxJQUFELENBQU9DLE1BQVAsQ0FBZUMsUUFBZixDQUF5QkMsUUFBekIsQ0FBaEIsQ0FFQSxHQUFJNkIsQ0FBQUEsSUFBSSwwQkFBRyxLQUFNN0MsQ0FBQUEsSUFBSSxDQUFDZ0MsT0FBTCxDQUFhLENBQUVuQixJQUFGLENBQWIsRUFBdUJpQyxJQUF2QixFQUFULENBQVIsQ0FIa0Qsd0JBS2xEeEIsSUFBSSxDQUFHLEtBQU12QixDQUFBQSxJQUFJLENBQUNnRCxRQUFMLENBQWNqQyxNQUFkLENBQWIsQ0FMa0Qsd0JBT2xEYixNQUFNLENBQUNxQixJQUFJLENBQUNnQixLQUFOLENBQU4sQ0FBbUJKLEVBQW5CLENBQXNCSyxPQUF0QixDQUE4Qk0sSUFBSSxDQUFDRyxHQUFMLENBQVNYLFFBQVQsRUFBOUIsRUFDSCxDQVJDLENBQUYsQ0F0R3lCLHdCQWdIekJZLFNBQVMsQ0FBQyxJQUFNLGlEQUNaakQsSUFBSSxDQUFDa0QsaUJBQUwsQ0FBdUIsQ0FBRXZDLEVBQUYsQ0FBdkIsRUFDSCxDQUZRLENBQVQsQ0FoSHlCLHdCQW9IekJ3QyxLQUFLLENBQUMsSUFBTSx1REFBQTlDLENBQUFBLFFBQVEsQ0FBQytDLFVBQVQsR0FBcUIsQ0FBNUIsQ0FBTCxDQUNILENBckhPLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKVxuXG5jb25zdCB7IGVudjogeyBURVNUX01PTkdPREJfVVJMIH0gfSA9IHByb2Nlc3NcbmNvbnN0IHsgbW9kZWxzOiB7IFVzZXIsIExhbmQgfSB9ID0gcmVxdWlyZSgnaG9vcnQtZGF0YScpXG4vL2NvbnN0IHsgU2NoZW1hVHlwZXM6IHsgT2JqZWN0SWQgfSB9ID0gcmVxdWlyZSgnbW9uZ29vc2UnKVxuY29uc3QgeyBleHBlY3QgfSA9IHJlcXVpcmUoJ2NoYWknKVxuY29uc3QgeyByYW5kb20gfSA9IE1hdGhcbmNvbnN0IGNyZWF0ZUxhbmQgPSByZXF1aXJlKCcuL2NyZWF0ZS1sYW5kJylcbmNvbnN0IHsgbW9uZ29vc2UgfSA9IHJlcXVpcmUoJ2hvb3J0LWRhdGEnKVxuXG5kZXNjcmliZSgnY3JlYXRlTGFuZCcsICgpID0+IHtcbiAgICBiZWZvcmUoKCkgPT4gbW9uZ29vc2UuY29ubmVjdChURVNUX01PTkdPREJfVVJMLCB7IHVzZU5ld1VybFBhcnNlcjogdHJ1ZSwgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlIH0pKVxuXG4gICAgbGV0IGlkLCB2ZWdnaWVzSWQsIG5hbWUsIHVzZXJJZCwgbG9jYXRpb24sIHNvaWx0eXBlLCBzY2hlbWUsIG5hbWVVc2VyLCB1c2VybmFtZSwgZW1haWwsIHBhc3N3b3JkLCB1c2VyXG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgbmFtZVVzZXIgPSBgbmFtZVVzZXItJHtyYW5kb20oKX1gXG4gICAgICAgIHVzZXJuYW1lID0gYHVzZXJuYW1lLSR7cmFuZG9tKCl9YFxuICAgICAgICBlbWFpbCA9IGBlbWFpbC0ke3JhbmRvbSgpfUBtYWlsLmNvbWBcbiAgICAgICAgcGFzc3dvcmQgPSBgcGFzc3dvcmQtJHtyYW5kb20oKX1gXG5cbiAgICAgICAgbmFtZSA9IGBuYW1lLSR7cmFuZG9tKCl9YFxuICAgICAgICBsb2NhdGlvbiA9IGBsb2NhdGlvbi0ke3JhbmRvbSgpfWBcbiAgICAgICAgc29pbHR5cGUgPSBgc29pbHR5cGUtJHtyYW5kb20oKX1gXG5cbiAgICAgICAgdmVnZ2llc0lkID0gW11cblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspXG4gICAgICAgICAgICB2ZWdnaWVzSWQucHVzaChgdmVnZ2llcy0ke3JhbmRvbSgpfWApXG5cbiAgICAgICAgc2NoZW1lID0gW1tdLCBbXSwgW10sIFtdLCBbXV1cblxuICAgICAgICBmb3IgKGxldCBhcnIgb2Ygc2NoZW1lKSB7XG4gICAgICAgICAgICBpZiAoYXJyID09PSAwKSBmb3IgKGxldCBqID0gMDsgaiA8IDM7IGorKykgYXJyLnB1c2goZmFsc2UpXG5cbiAgICAgICAgICAgIGVsc2UgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspXG4gICAgICAgICAgICAgICAgYXJyLnB1c2godmVnZ2llc0lkW2pdKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFVzZXIuY3JlYXRlKHsgbmFtZTogbmFtZVVzZXIsIHVzZXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQgfSlcbiAgICAgICAgICAgIC50aGVuKF91c2VyID0+IHtcbiAgICAgICAgICAgICAgICB1c2VyID0gX3VzZXJcbiAgICAgICAgICAgICAgICB1c2VySWQgPSBfdXNlci5pZFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHsgfSlcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBzdWNjZWVkIG9uIHZhbGlkIGRhdGEnLCAoKSA9PiB7XG5cbiAgICAgICAgcmV0dXJuIGNyZWF0ZUxhbmQobmFtZSwgdXNlcklkLCBsb2NhdGlvbiwgc29pbHR5cGUpXG4gICAgICAgICAgICAudGhlbigoKSA9PiBMYW5kLmZpbmRPbmUoeyBuYW1lIH0pKVxuICAgICAgICAgICAgLnRoZW4oaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgZXhwZWN0KGl0ZW0pLnRvLmV4aXN0XG4gICAgICAgICAgICAgICAgaWQgPSBpdGVtLmlkXG4gICAgICAgICAgICAgICAgZXhwZWN0KGl0ZW0ubmFtZSkudG8uZXF1YWwobmFtZSlcbiAgICAgICAgICAgICAgICBleHBlY3QoaXRlbS51c2VySWQudG9TdHJpbmcoKSkudG8uZXF1YWwodXNlcklkKVxuICAgICAgICAgICAgICAgIGV4cGVjdChpdGVtLmxvY2F0aW9uKS50by5lcXVhbChsb2NhdGlvbilcbiAgICAgICAgICAgICAgICBleHBlY3QoaXRlbS5zb2lsdHlwZSkudG8uZXF1YWwoc29pbHR5cGUpXG4gICAgICAgICAgICAgICAgLy9leHBlY3QoaXRlbS5zY2hlbWUpLnRvLmVxbChzY2hlbWUpICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigoKSA9PiBVc2VyLmZpbmRPbmUoeyBsYW5kczogaWQgfSkpXG4gICAgICAgICAgICAudGhlbih1c2VyID0+IHtcbiAgICAgICAgICAgICAgICBleHBlY3QodXNlcikudG8uZXhpc3RcbiAgICAgICAgICAgICAgICBleHBlY3QodXNlci5sYW5kcykudG8uaW5jbHVkZShpZClcbiAgICAgICAgICAgIH0pXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgbm90IGZhaWwgb24gbm90IGRlZmluZWQgc2NoZW1lJywgKCkgPT4ge1xuICAgICAgICByZXR1cm4gY3JlYXRlTGFuZChuYW1lLCB1c2VySWQsIGxvY2F0aW9uLCBzb2lsdHlwZSwgc2NoZW1lKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4gTGFuZC5maW5kT25lKHsgbmFtZSB9KSlcbiAgICAgICAgICAgIC50aGVuKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgIGlkID0gaXRlbS5pZFxuICAgICAgICAgICAgICAgIGV4cGVjdChpdGVtLnNjaGVtZSkudG8uZXFsKHNjaGVtZSlcbiAgICAgICAgICAgIH0pXG4gICAgfSlcblxuICAgIC8vIGl0KCdzaG91bGQgZmFpbCBpZiBzY2hlbWUgaXMgbm90IG9mIGEgdmFsaWQgZm9ybWF0JywgKCkgPT4ge1xuICAgIC8vICAgICByZXR1cm4gY3JlYXRlTGFuZChuYW1lLCB1c2VySWQsIGxvY2F0aW9uLCBzb2lsdHlwZSlcbiAgICAvLyAgICAgICAgIC50aGVuKCgpID0+IHsgdGhyb3cgbmV3IEVycm9yKCdzaG91bGQgbm90IHJlYWNoIHRoaXMgcG9pbnQnKSB9KVxuICAgIC8vICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAvLyAgICAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvLmV4aXN0XG4gICAgLy8gICAgICAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvLmVxbCgnc2NoZW1lIGlzIG5vdCBhbiBhcnJheScpXG4gICAgLy8gICAgICAgICB9KVxuXG4gICAgLy8gZXhwZWN0KCgpID0+IHtcbiAgICAvLyAgICAgcmV0dXJuIGNyZWF0ZUxhbmQobmFtZSwgdXNlcklkLCBsb2NhdGlvbiwgc29pbHR5cGUsIFt7IGxpbmU6IGZhbHNlLCBsaW5lOiBmYWxzZSwgbGluZTogZmFsc2UsIGxpbmU6IGZhbHNlLCBsaW5lOiBmYWxzZSB9XSlcbiAgICAvLyB9KS50by50aHJvdyhUeXBlRXJyb3IsICdzY2hlbWUgaXMgbm90IGFuIGFycmF5JylcbiAgICAvLyB9KVxuXG4gICAgLy8gaXQoJ3Nob3VsZCBmYWlsIG9uIG5vdCBhbGwgZmllbGRzIGRlZmluZWQgZXhjZXB0IHNjaGVtZScsICgpID0+IHtcbiAgICAvLyAgICAgcmV0dXJuIGNyZWF0ZUxhbmQobmFtZSwgdXNlcklkLCBsb2NhdGlvbiwgc29pbHR5cGUpXG4gICAgLy8gICAgICAgICAudGhlbigoKSA9PiB7IHRocm93IG5ldyBFcnJvcignc2hvdWxkIG5vdCByZWFjaCB0aGlzIHBvaW50JykgfSlcbiAgICAvLyAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgLy8gICAgICAgICAgICAgZXhwZWN0KGVycm9yKS50by5leGlzdFxuICAgIC8vICAgICAgICAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50by5lcWwoJ3NvaWx0eXBlIHVuZGVmaW5lZCBpcyBub3QgYSBzdHJpbmcnKVxuICAgIC8vICAgICAgICAgfSlcblxuICAgIC8vICAgICAvLyBleHBlY3QoKCkgPT4gY3JlYXRlTGFuZChuYW1lLCB1c2VySWQsIGxvY2F0aW9uKVxuICAgIC8vICAgICAvLyApLnRvLnRocm93KFR5cGVFcnJvciwgJ3NvaWx0eXBlIHVuZGVmaW5lZCBpcyBub3QgYSBzdHJpbmcnKVxuICAgIC8vIH0pXG5cbiAgICBpdCgnc2hvdWxkIGZhaWwgb24gcmVwZWF0ZWQgbmFtZScsICgpID0+IHtcblxuICAgICAgICByZXR1cm4gY3JlYXRlTGFuZChuYW1lLCB1c2VySWQsIGxvY2F0aW9uLCBzb2lsdHlwZSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IGNyZWF0ZUxhbmQobmFtZSwgdXNlcklkLCBsb2NhdGlvbiwgc29pbHR5cGUpKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4geyB0aHJvdyBuZXcgRXJyb3IoJ3Nob3VsZCBub3QgcmVhY2ggdGhpcyBwb2ludCcpIH0pXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIGV4cGVjdChlcnJvcikudG8uZXhpc3RcbiAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG8uZXFsKGBZb3UgaGF2ZSBhbHJlYWR5IGNyZWF0ZWQgYSBsYW5kIHdpdGggdGhlIG5hbWUgJHtuYW1lfSFgKVxuICAgICAgICAgICAgfSlcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBhZGQgYSBuZXcgbGFuZCB0byB1c2VyLmxhbmRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBjcmVhdGVMYW5kKG5hbWUsIHVzZXJJZCwgbG9jYXRpb24sIHNvaWx0eXBlKVxuXG4gICAgICAgIGxldCBsYW5kID0gYXdhaXQgTGFuZC5maW5kT25lKHsgbmFtZSB9KS5sZWFuKClcblxuICAgICAgICB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZCh1c2VySWQpXG5cbiAgICAgICAgZXhwZWN0KHVzZXIubGFuZHMpLnRvLmluY2x1ZGUobGFuZC5faWQudG9TdHJpbmcoKSlcbiAgICB9KVxuXG4gICAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICAgICAgTGFuZC5maW5kQnlJZEFuZFJlbW92ZSh7IGlkIH0pXG4gICAgfSlcblxuICAgIGFmdGVyKCgpID0+IG1vbmdvb3NlLmRpc2Nvbm5lY3QoKSlcbn0pIl19