function cov_1upsd1jfgq(){var path="/Users/So/bootcamp/collab/skylab-bootcamp-202001/staff/sofia-costa/hoort/hoort-api/logic/retrieve-user-plantations.js";var hash="b85800b5aacfe8045c4ee598d33e7119d5f0b190";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/So/bootcamp/collab/skylab-bootcamp-202001/staff/sofia-costa/hoort/hoort-api/logic/retrieve-user-plantations.js",statementMap:{"0":{start:{line:1,column:21},end:{line:1,column:43}},"1":{start:{line:2,column:35},end:{line:2,column:56}},"2":{start:{line:3,column:26},end:{line:3,column:55}},"3":{start:{line:6,column:0},end:{line:33,column:1}},"4":{start:{line:7,column:4},end:{line:7,column:37}},"5":{start:{line:9,column:18},end:{line:9,column:20}},"6":{start:{line:10,column:15},end:{line:10,column:42}},"7":{start:{line:12,column:4},end:{line:12,column:61}},"8":{start:{line:12,column:15},end:{line:12,column:61}},"9":{start:{line:16,column:4},end:{line:28,column:5}},"10":{start:{line:17,column:8},end:{line:17,column:55}},"11":{start:{line:19,column:8},end:{line:27,column:10}},"12":{start:{line:21,column:12},end:{line:21,column:36}},"13":{start:{line:22,column:12},end:{line:22,column:44}},"14":{start:{line:23,column:12},end:{line:23,column:43}},"15":{start:{line:24,column:12},end:{line:24,column:28}},"16":{start:{line:26,column:12},end:{line:26,column:38}},"17":{start:{line:32,column:4},end:{line:32,column:18}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:17},end:{line:6,column:18}},loc:{start:{line:6,column:35},end:{line:33,column:1}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:19,column:32},end:{line:19,column:33}},loc:{start:{line:19,column:41},end:{line:27,column:9}},line:19}},branchMap:{"0":{loc:{start:{line:12,column:4},end:{line:12,column:61}},type:"if",locations:[{start:{line:12,column:4},end:{line:12,column:61}},{start:{line:12,column:4},end:{line:12,column:61}}],line:12}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},f:{"0":0,"1":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b85800b5aacfe8045c4ee598d33e7119d5f0b190"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_1upsd1jfgq=function(){return actualCoverage;};return actualCoverage;}cov_1upsd1jfgq();const{validate}=(cov_1upsd1jfgq().s[0]++,require('hoort-utils'));const{models:{Land,User}}=(cov_1upsd1jfgq().s[1]++,require('hoort-data'));const{NotFoundError}=(cov_1upsd1jfgq().s[2]++,require('../../hoort-errors'));cov_1upsd1jfgq().s[3]++;module.exports=async userId=>{cov_1upsd1jfgq().f[0]++;cov_1upsd1jfgq().s[4]++;validate.string(userId,'userId');let results=(cov_1upsd1jfgq().s[5]++,[]);let user=(cov_1upsd1jfgq().s[6]++,await User.findById(userId));cov_1upsd1jfgq().s[7]++;if(!user){cov_1upsd1jfgq().b[0][0]++;cov_1upsd1jfgq().s[8]++;throw new NotFoundError('User does not exist');}else{cov_1upsd1jfgq().b[0][1]++;}// if (!lands) return new NotFoundError(`user doesn't have any lands`)
cov_1upsd1jfgq().s[9]++;for(let land of user.lands){cov_1upsd1jfgq().s[10]++;land=await Land.findById(land._id.toString());cov_1upsd1jfgq().s[11]++;land.plantation.forEach(plant=>{cov_1upsd1jfgq().f[1]++;cov_1upsd1jfgq().s[12]++;plant=plant.toObject();cov_1upsd1jfgq().s[13]++;plant.land=land._id.toString();cov_1upsd1jfgq().s[14]++;plant.id=plant._id.toString();cov_1upsd1jfgq().s[15]++;delete plant._id;cov_1upsd1jfgq().s[16]++;return results.push(plant);});}// if (!results.length) throw new NotFoundError(`You haven't planted anything yet!`)
cov_1upsd1jfgq().s[17]++;return results;};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLXVzZXItcGxhbnRhdGlvbnMuanMiXSwibmFtZXMiOlsidmFsaWRhdGUiLCJyZXF1aXJlIiwibW9kZWxzIiwiTGFuZCIsIlVzZXIiLCJOb3RGb3VuZEVycm9yIiwibW9kdWxlIiwiZXhwb3J0cyIsInVzZXJJZCIsInN0cmluZyIsInJlc3VsdHMiLCJ1c2VyIiwiZmluZEJ5SWQiLCJsYW5kIiwibGFuZHMiLCJfaWQiLCJ0b1N0cmluZyIsInBsYW50YXRpb24iLCJmb3JFYWNoIiwicGxhbnQiLCJ0b09iamVjdCIsImlkIiwicHVzaCJdLCJtYXBwaW5ncyI6IjgzRUFBQSxLQUFNLENBQUVBLFFBQUYsMkJBQWVDLE9BQU8sQ0FBQyxhQUFELENBQXRCLENBQU4sQ0FDQSxLQUFNLENBQUVDLE1BQU0sQ0FBRSxDQUFFQyxJQUFGLENBQVFDLElBQVIsQ0FBViwyQkFBNkJILE9BQU8sQ0FBQyxZQUFELENBQXBDLENBQU4sQ0FDQSxLQUFNLENBQUVJLGFBQUYsMkJBQW9CSixPQUFPLENBQUMsb0JBQUQsQ0FBM0IsQ0FBTixDLHdCQUdBSyxNQUFNLENBQUNDLE9BQVAsQ0FBaUIsS0FBT0MsQ0FBQUEsTUFBUCxFQUFrQixpREFDL0JSLFFBQVEsQ0FBQ1MsTUFBVCxDQUFnQkQsTUFBaEIsQ0FBd0IsUUFBeEIsRUFFQSxHQUFJRSxDQUFBQSxPQUFPLDBCQUFHLEVBQUgsQ0FBWCxDQUNBLEdBQUlDLENBQUFBLElBQUksMEJBQUcsS0FBTVAsQ0FBQUEsSUFBSSxDQUFDUSxRQUFMLENBQWNKLE1BQWQsQ0FBVCxDQUFSLENBSitCLHdCQU0vQixHQUFJLENBQUNHLElBQUwsQ0FBVyx5REFBTSxJQUFJTixDQUFBQSxhQUFKLENBQWtCLHFCQUFsQixDQUFOLENBQThDLENBQXpELGlDQUVBO0FBUitCLHdCQVUvQixJQUFLLEdBQUlRLENBQUFBLElBQVQsR0FBaUJGLENBQUFBLElBQUksQ0FBQ0csS0FBdEIsQ0FBNkIsMEJBQ3pCRCxJQUFJLENBQUcsS0FBTVYsQ0FBQUEsSUFBSSxDQUFDUyxRQUFMLENBQWNDLElBQUksQ0FBQ0UsR0FBTCxDQUFTQyxRQUFULEVBQWQsQ0FBYixDQUR5Qix5QkFHekJILElBQUksQ0FBQ0ksVUFBTCxDQUFnQkMsT0FBaEIsQ0FBd0JDLEtBQUssRUFBSSxrREFFN0JBLEtBQUssQ0FBR0EsS0FBSyxDQUFDQyxRQUFOLEVBQVIsQ0FGNkIseUJBRzdCRCxLQUFLLENBQUNOLElBQU4sQ0FBYUEsSUFBSSxDQUFDRSxHQUFMLENBQVNDLFFBQVQsRUFBYixDQUg2Qix5QkFJN0JHLEtBQUssQ0FBQ0UsRUFBTixDQUFXRixLQUFLLENBQUNKLEdBQU4sQ0FBVUMsUUFBVixFQUFYLENBSjZCLHlCQUs3QixNQUFPRyxDQUFBQSxLQUFLLENBQUNKLEdBQWIsQ0FMNkIseUJBTzdCLE1BQU9MLENBQUFBLE9BQU8sQ0FBQ1ksSUFBUixDQUFhSCxLQUFiLENBQVAsQ0FDSCxDQVJELEVBU0gsQ0FFRDtBQXhCK0IseUJBMEIvQixNQUFPVCxDQUFBQSxPQUFQLENBQ0gsQ0EzQkQiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHZhbGlkYXRlIH0gPSByZXF1aXJlKCdob29ydC11dGlscycpXG5jb25zdCB7IG1vZGVsczogeyBMYW5kLCBVc2VyIH0gfSA9IHJlcXVpcmUoJ2hvb3J0LWRhdGEnKVxuY29uc3QgeyBOb3RGb3VuZEVycm9yIH0gPSByZXF1aXJlKCcuLi8uLi9ob29ydC1lcnJvcnMnKVxuXG5cbm1vZHVsZS5leHBvcnRzID0gYXN5bmMgKHVzZXJJZCkgPT4ge1xuICAgIHZhbGlkYXRlLnN0cmluZyh1c2VySWQsICd1c2VySWQnKVxuXG4gICAgbGV0IHJlc3VsdHMgPSBbXVxuICAgIGxldCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZCh1c2VySWQpXG5cbiAgICBpZiAoIXVzZXIpIHRocm93IG5ldyBOb3RGb3VuZEVycm9yKCdVc2VyIGRvZXMgbm90IGV4aXN0JylcblxuICAgIC8vIGlmICghbGFuZHMpIHJldHVybiBuZXcgTm90Rm91bmRFcnJvcihgdXNlciBkb2Vzbid0IGhhdmUgYW55IGxhbmRzYClcblxuICAgIGZvciAobGV0IGxhbmQgb2YgdXNlci5sYW5kcykge1xuICAgICAgICBsYW5kID0gYXdhaXQgTGFuZC5maW5kQnlJZChsYW5kLl9pZC50b1N0cmluZygpKVxuXG4gICAgICAgIGxhbmQucGxhbnRhdGlvbi5mb3JFYWNoKHBsYW50ID0+IHtcblxuICAgICAgICAgICAgcGxhbnQgPSBwbGFudC50b09iamVjdCgpXG4gICAgICAgICAgICBwbGFudC5sYW5kID0gbGFuZC5faWQudG9TdHJpbmcoKVxuICAgICAgICAgICAgcGxhbnQuaWQgPSBwbGFudC5faWQudG9TdHJpbmcoKVxuICAgICAgICAgICAgZGVsZXRlIHBsYW50Ll9pZFxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0cy5wdXNoKHBsYW50KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vIGlmICghcmVzdWx0cy5sZW5ndGgpIHRocm93IG5ldyBOb3RGb3VuZEVycm9yKGBZb3UgaGF2ZW4ndCBwbGFudGVkIGFueXRoaW5nIHlldCFgKVxuXG4gICAgcmV0dXJuIHJlc3VsdHNcbn1cbiJdfQ==